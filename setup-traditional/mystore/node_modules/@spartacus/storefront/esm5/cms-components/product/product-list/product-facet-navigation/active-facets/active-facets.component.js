import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, Input } from '@angular/core';
import { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';
import { FacetService } from '../services/facet.service';
/**
 * Active facets render the applied facet values as a list of focusable buttons
 * which can be used to remove the applied facet value.
 */
var ActiveFacetsComponent = /** @class */ (function () {
    function ActiveFacetsComponent(facetService) {
        this.facetService = facetService;
        /** Active facets which are applied to the product results. */
        this.facetList$ = this.facetService.facetList$;
        /** Configurable icon which is used for the active facet close button */
        this.closeIcon = ICON_TYPE.CLOSE;
    }
    ActiveFacetsComponent.prototype.getLinkParams = function (facet) {
        var _a, _b;
        return this.facetService.getLinkParams((_b = (_a = facet.removeQuery) === null || _a === void 0 ? void 0 : _a.query) === null || _b === void 0 ? void 0 : _b.value);
    };
    /**
     * The focus key is used to persist the focus on the facet when the DOM is being
     * recreated. We only apply the focus key for the given _active_ facet when there
     * the original facets is not available. This happens for non multi-valued facets.
     *
     * With this approach, the we keep the focus, either at the facet list or on the
     * active facets.
     */
    ActiveFacetsComponent.prototype.getFocusKey = function (facetList, facet) {
        var _a;
        return ((_a = facetList.facets) === null || _a === void 0 ? void 0 : _a.find(function (f) { var _a; return (_a = f.values) === null || _a === void 0 ? void 0 : _a.find(function (val) { return val.name === facet.facetValueName; }); })) ? ''
            : facet.facetValueName;
    };
    ActiveFacetsComponent.ctorParameters = function () { return [
        { type: FacetService }
    ]; };
    __decorate([
        Input()
    ], ActiveFacetsComponent.prototype, "closeIcon", void 0);
    ActiveFacetsComponent = __decorate([
        Component({
            selector: 'cx-active-facets',
            template: "<ng-container *ngIf=\"facetList$ | async as facetList\">\r\n  <h4 *ngIf=\"facetList?.activeFacets?.length > 0\">\r\n    {{ 'productList.appliedFilter' | cxTranslate }}\r\n  </h4>\r\n\r\n  <a\r\n    *ngFor=\"let facet of facetList?.activeFacets\"\r\n    routerLink=\"./\"\r\n    [queryParams]=\"getLinkParams(facet)\"\r\n    [cxFocus]=\"getFocusKey(facetList, facet)\"\r\n  >\r\n    <span>{{ facet.facetValueName }}</span>\r\n    <cx-icon aria-hidden=\"true\" [type]=\"closeIcon\"></cx-icon>\r\n  </a>\r\n</ng-container>\r\n",
            changeDetection: ChangeDetectionStrategy.Default
        })
    ], ActiveFacetsComponent);
    return ActiveFacetsComponent;
}());
export { ActiveFacetsComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZlLWZhY2V0cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL3N0b3JlZnJvbnQvIiwic291cmNlcyI6WyJjbXMtY29tcG9uZW50cy9wcm9kdWN0L3Byb2R1Y3QtbGlzdC9wcm9kdWN0LWZhY2V0LW5hdmlnYXRpb24vYWN0aXZlLWZhY2V0cy9hY3RpdmUtZmFjZXRzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHMUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBRS9FLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUV6RDs7O0dBR0c7QUFNSDtJQU9FLCtCQUFzQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQU5oRCw4REFBOEQ7UUFDOUQsZUFBVSxHQUEwQixJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQztRQUVqRSx3RUFBd0U7UUFDL0QsY0FBUyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7SUFFYyxDQUFDO0lBRXBELDZDQUFhLEdBQWIsVUFBYyxLQUFpQjs7UUFDN0IsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsYUFBQyxLQUFLLENBQUMsV0FBVywwQ0FBRSxLQUFLLDBDQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsMkNBQVcsR0FBWCxVQUFZLFNBQW9CLEVBQUUsS0FBaUI7O1FBQ2pELE9BQU8sT0FBQSxTQUFTLENBQUMsTUFBTSwwQ0FBRSxJQUFJLENBQUMsVUFBQyxDQUFDLHlCQUM5QixDQUFDLENBQUMsTUFBTSwwQ0FBRSxJQUFJLENBQUMsVUFBQyxHQUFHLElBQUssT0FBQSxHQUFHLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxjQUFjLEVBQWpDLENBQWlDLElBQUMsR0FFMUQsQ0FBQyxDQUFDLEVBQUU7WUFDSixDQUFDLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQztJQUMzQixDQUFDOztnQkFwQm1DLFlBQVk7O0lBRnZDO1FBQVIsS0FBSyxFQUFFOzREQUE2QjtJQUwxQixxQkFBcUI7UUFMakMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGtCQUFrQjtZQUM1Qix1aEJBQTZDO1lBQzdDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxPQUFPO1NBQ2pELENBQUM7T0FDVyxxQkFBcUIsQ0E0QmpDO0lBQUQsNEJBQUM7Q0FBQSxBQTVCRCxJQTRCQztTQTVCWSxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBCcmVhZGNydW1iIH0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJQ09OX1RZUEUgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9jbXMtY29tcG9uZW50cy9taXNjL2ljb24vaWNvbi5tb2RlbCc7XHJcbmltcG9ydCB7IEZhY2V0TGlzdCB9IGZyb20gJy4uL2ZhY2V0Lm1vZGVsJztcclxuaW1wb3J0IHsgRmFjZXRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZmFjZXQuc2VydmljZSc7XHJcblxyXG4vKipcclxuICogQWN0aXZlIGZhY2V0cyByZW5kZXIgdGhlIGFwcGxpZWQgZmFjZXQgdmFsdWVzIGFzIGEgbGlzdCBvZiBmb2N1c2FibGUgYnV0dG9uc1xyXG4gKiB3aGljaCBjYW4gYmUgdXNlZCB0byByZW1vdmUgdGhlIGFwcGxpZWQgZmFjZXQgdmFsdWUuXHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2N4LWFjdGl2ZS1mYWNldHMnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hY3RpdmUtZmFjZXRzLmNvbXBvbmVudC5odG1sJyxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LkRlZmF1bHQsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBY3RpdmVGYWNldHNDb21wb25lbnQge1xyXG4gIC8qKiBBY3RpdmUgZmFjZXRzIHdoaWNoIGFyZSBhcHBsaWVkIHRvIHRoZSBwcm9kdWN0IHJlc3VsdHMuICovXHJcbiAgZmFjZXRMaXN0JDogT2JzZXJ2YWJsZTxGYWNldExpc3Q+ID0gdGhpcy5mYWNldFNlcnZpY2UuZmFjZXRMaXN0JDtcclxuXHJcbiAgLyoqIENvbmZpZ3VyYWJsZSBpY29uIHdoaWNoIGlzIHVzZWQgZm9yIHRoZSBhY3RpdmUgZmFjZXQgY2xvc2UgYnV0dG9uICovXHJcbiAgQElucHV0KCkgY2xvc2VJY29uID0gSUNPTl9UWVBFLkNMT1NFO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgZmFjZXRTZXJ2aWNlOiBGYWNldFNlcnZpY2UpIHt9XHJcblxyXG4gIGdldExpbmtQYXJhbXMoZmFjZXQ6IEJyZWFkY3J1bWIpIHtcclxuICAgIHJldHVybiB0aGlzLmZhY2V0U2VydmljZS5nZXRMaW5rUGFyYW1zKGZhY2V0LnJlbW92ZVF1ZXJ5Py5xdWVyeT8udmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZvY3VzIGtleSBpcyB1c2VkIHRvIHBlcnNpc3QgdGhlIGZvY3VzIG9uIHRoZSBmYWNldCB3aGVuIHRoZSBET00gaXMgYmVpbmdcclxuICAgKiByZWNyZWF0ZWQuIFdlIG9ubHkgYXBwbHkgdGhlIGZvY3VzIGtleSBmb3IgdGhlIGdpdmVuIF9hY3RpdmVfIGZhY2V0IHdoZW4gdGhlcmVcclxuICAgKiB0aGUgb3JpZ2luYWwgZmFjZXRzIGlzIG5vdCBhdmFpbGFibGUuIFRoaXMgaGFwcGVucyBmb3Igbm9uIG11bHRpLXZhbHVlZCBmYWNldHMuXHJcbiAgICpcclxuICAgKiBXaXRoIHRoaXMgYXBwcm9hY2gsIHRoZSB3ZSBrZWVwIHRoZSBmb2N1cywgZWl0aGVyIGF0IHRoZSBmYWNldCBsaXN0IG9yIG9uIHRoZVxyXG4gICAqIGFjdGl2ZSBmYWNldHMuXHJcbiAgICovXHJcbiAgZ2V0Rm9jdXNLZXkoZmFjZXRMaXN0OiBGYWNldExpc3QsIGZhY2V0OiBCcmVhZGNydW1iKSB7XHJcbiAgICByZXR1cm4gZmFjZXRMaXN0LmZhY2V0cz8uZmluZCgoZikgPT5cclxuICAgICAgZi52YWx1ZXM/LmZpbmQoKHZhbCkgPT4gdmFsLm5hbWUgPT09IGZhY2V0LmZhY2V0VmFsdWVOYW1lKVxyXG4gICAgKVxyXG4gICAgICA/ICcnXHJcbiAgICAgIDogZmFjZXQuZmFjZXRWYWx1ZU5hbWU7XHJcbiAgfVxyXG59XHJcbiJdfQ==