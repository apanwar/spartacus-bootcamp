import { __decorate, __read, __spread } from "tslib";
import { Component } from '@angular/core';
import { PromotionLocation, } from '@spartacus/core';
import { map } from 'rxjs/operators';
import { PromotionService } from '../../../../../shared/services/promotion/promotion.service';
import { OrderDetailsService } from '../order-details.service';
import { cancelledValues, completedValues, } from './order-consigned-entries/order-consigned-entries.model';
var OrderDetailItemsComponent = /** @class */ (function () {
    function OrderDetailItemsComponent(orderDetailsService, promotionService) {
        this.orderDetailsService = orderDetailsService;
        this.promotionService = promotionService;
        this.promotionLocation = PromotionLocation.Order;
        this.order$ = this.orderDetailsService.getOrderDetails();
    }
    OrderDetailItemsComponent.prototype.ngOnInit = function () {
        this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
        this.others$ = this.getOtherStatus.apply(this, __spread(completedValues, cancelledValues));
        this.completed$ = this.getExactStatus(completedValues);
        this.cancel$ = this.getExactStatus(cancelledValues);
    };
    OrderDetailItemsComponent.prototype.getExactStatus = function (consignmentStatus) {
        return this.order$.pipe(map(function (order) {
            if (Boolean(order.consignments)) {
                return order.consignments.filter(function (consignment) {
                    return consignmentStatus.includes(consignment.status);
                });
            }
        }));
    };
    OrderDetailItemsComponent.prototype.getOtherStatus = function () {
        var consignmentStatus = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            consignmentStatus[_i] = arguments[_i];
        }
        return this.order$.pipe(map(function (order) {
            if (Boolean(order.consignments)) {
                return order.consignments.filter(function (consignment) { return !consignmentStatus.includes(consignment.status); });
            }
        }));
    };
    OrderDetailItemsComponent.ctorParameters = function () { return [
        { type: OrderDetailsService },
        { type: PromotionService }
    ]; };
    OrderDetailItemsComponent = __decorate([
        Component({
            selector: 'cx-order-details-items',
            template: "<ng-container *ngIf=\"order$ | async as order\">\r\n  <ng-container\r\n    *ngIf=\"order.consignments?.length || order.unconsignedEntries?.length\"\r\n  >\r\n    <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\r\n      <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <!-- consigned entries -->\r\n  <ng-container *ngIf=\"order.consignments?.length\">\r\n    <cx-order-consigned-entries\r\n      *ngIf=\"others$ | async as others\"\r\n      [order]=\"order\"\r\n      [consignments]=\"others\"\r\n    ></cx-order-consigned-entries>\r\n\r\n    <cx-order-consigned-entries\r\n      *ngIf=\"completed$ | async as completed\"\r\n      [order]=\"order\"\r\n      [consignments]=\"completed\"\r\n    ></cx-order-consigned-entries>\r\n\r\n    <cx-order-consigned-entries\r\n      *ngIf=\"cancel$ | async as cancel\"\r\n      [order]=\"order\"\r\n      [consignments]=\"cancel\"\r\n    ></cx-order-consigned-entries>\r\n  </ng-container>\r\n\r\n  <!-- unconsigned entries -->\r\n  <ng-container *ngIf=\"order.unconsignedEntries?.length\">\r\n    <div class=\"cx-list row\">\r\n      <div class=\"cx-list-header col-12\">\r\n        <div class=\"cx-list-status\">\r\n          {{\r\n            'orderDetails.statusDisplay'\r\n              | cxTranslate: { context: order.statusDisplay }\r\n          }}\r\n        </div>\r\n      </div>\r\n      <div class=\"cx-list-item col-12\">\r\n        <cx-cart-item-list\r\n          [items]=\"order?.unconsignedEntries\"\r\n          [readonly]=\"true\"\r\n          [promotionLocation]=\"promotionLocation\"\r\n        ></cx-cart-item-list>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</ng-container>\r\n"
        })
    ], OrderDetailItemsComponent);
    return OrderDetailItemsComponent;
}());
export { OrderDetailItemsComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItZGV0YWlsLWl0ZW1zLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFydGFjdXMvc3RvcmVmcm9udC8iLCJzb3VyY2VzIjpbImNtcy1jb21wb25lbnRzL215YWNjb3VudC9vcmRlci9vcmRlci1kZXRhaWxzL29yZGVyLWRldGFpbC1pdGVtcy9vcmRlci1kZXRhaWwtaXRlbXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ2xELE9BQU8sRUFHTCxpQkFBaUIsR0FFbEIsTUFBTSxpQkFBaUIsQ0FBQztBQUV6QixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDOUYsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDL0QsT0FBTyxFQUNMLGVBQWUsRUFDZixlQUFlLEdBQ2hCLE1BQU0seURBQXlELENBQUM7QUFNakU7SUFDRSxtQ0FDWSxtQkFBd0MsRUFDeEMsZ0JBQWtDO1FBRGxDLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFDeEMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUc5QyxzQkFBaUIsR0FBc0IsaUJBQWlCLENBQUMsS0FBSyxDQUFDO1FBQy9ELFdBQU0sR0FBc0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGVBQWUsRUFBRSxDQUFDO0lBSHBFLENBQUM7SUFTSiw0Q0FBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FDOUQsSUFBSSxDQUFDLGlCQUFpQixDQUN2QixDQUFDO1FBQ0YsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxPQUFuQixJQUFJLFdBQW1CLGVBQWUsRUFBSyxlQUFlLEVBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDdkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFTyxrREFBYyxHQUF0QixVQUNFLGlCQUEyQjtRQUUzQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNyQixHQUFHLENBQUMsVUFBQyxLQUFLO1lBQ1IsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUMvQixPQUFPLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUMsV0FBVztvQkFDM0MsT0FBQSxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztnQkFBOUMsQ0FBOEMsQ0FDL0MsQ0FBQzthQUNIO1FBQ0gsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7SUFFTyxrREFBYyxHQUF0QjtRQUNFLDJCQUE4QjthQUE5QixVQUE4QixFQUE5QixxQkFBOEIsRUFBOUIsSUFBOEI7WUFBOUIsc0NBQThCOztRQUU5QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNyQixHQUFHLENBQUMsVUFBQyxLQUFLO1lBQ1IsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUMvQixPQUFPLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUM5QixVQUFDLFdBQVcsSUFBSyxPQUFBLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsRUFBL0MsQ0FBK0MsQ0FDakUsQ0FBQzthQUNIO1FBQ0gsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7O2dCQTlDZ0MsbUJBQW1CO2dCQUN0QixnQkFBZ0I7O0lBSG5DLHlCQUF5QjtRQUpyQyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsd0JBQXdCO1lBQ2xDLHd0REFBa0Q7U0FDbkQsQ0FBQztPQUNXLHlCQUF5QixDQWlEckM7SUFBRCxnQ0FBQztDQUFBLEFBakRELElBaURDO1NBakRZLHlCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQ29uc2lnbm1lbnQsXHJcbiAgT3JkZXIsXHJcbiAgUHJvbW90aW9uTG9jYXRpb24sXHJcbiAgUHJvbW90aW9uUmVzdWx0LFxyXG59IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBQcm9tb3Rpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2hhcmVkL3NlcnZpY2VzL3Byb21vdGlvbi9wcm9tb3Rpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IE9yZGVyRGV0YWlsc1NlcnZpY2UgfSBmcm9tICcuLi9vcmRlci1kZXRhaWxzLnNlcnZpY2UnO1xyXG5pbXBvcnQge1xyXG4gIGNhbmNlbGxlZFZhbHVlcyxcclxuICBjb21wbGV0ZWRWYWx1ZXMsXHJcbn0gZnJvbSAnLi9vcmRlci1jb25zaWduZWQtZW50cmllcy9vcmRlci1jb25zaWduZWQtZW50cmllcy5tb2RlbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2N4LW9yZGVyLWRldGFpbHMtaXRlbXMnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9vcmRlci1kZXRhaWwtaXRlbXMuY29tcG9uZW50Lmh0bWwnLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgT3JkZXJEZXRhaWxJdGVtc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcm90ZWN0ZWQgb3JkZXJEZXRhaWxzU2VydmljZTogT3JkZXJEZXRhaWxzU2VydmljZSxcclxuICAgIHByb3RlY3RlZCBwcm9tb3Rpb25TZXJ2aWNlOiBQcm9tb3Rpb25TZXJ2aWNlXHJcbiAgKSB7fVxyXG5cclxuICBwcm9tb3Rpb25Mb2NhdGlvbjogUHJvbW90aW9uTG9jYXRpb24gPSBQcm9tb3Rpb25Mb2NhdGlvbi5PcmRlcjtcclxuICBvcmRlciQ6IE9ic2VydmFibGU8T3JkZXI+ID0gdGhpcy5vcmRlckRldGFpbHNTZXJ2aWNlLmdldE9yZGVyRGV0YWlscygpO1xyXG4gIG9yZGVyUHJvbW90aW9ucyQ6IE9ic2VydmFibGU8UHJvbW90aW9uUmVzdWx0W10+O1xyXG4gIG90aGVycyQ6IE9ic2VydmFibGU8Q29uc2lnbm1lbnRbXT47XHJcbiAgY29tcGxldGVkJDogT2JzZXJ2YWJsZTxDb25zaWdubWVudFtdPjtcclxuICBjYW5jZWwkOiBPYnNlcnZhYmxlPENvbnNpZ25tZW50W10+O1xyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMub3JkZXJQcm9tb3Rpb25zJCA9IHRoaXMucHJvbW90aW9uU2VydmljZS5nZXRPcmRlclByb21vdGlvbnMoXHJcbiAgICAgIHRoaXMucHJvbW90aW9uTG9jYXRpb25cclxuICAgICk7XHJcbiAgICB0aGlzLm90aGVycyQgPSB0aGlzLmdldE90aGVyU3RhdHVzKC4uLmNvbXBsZXRlZFZhbHVlcywgLi4uY2FuY2VsbGVkVmFsdWVzKTtcclxuICAgIHRoaXMuY29tcGxldGVkJCA9IHRoaXMuZ2V0RXhhY3RTdGF0dXMoY29tcGxldGVkVmFsdWVzKTtcclxuICAgIHRoaXMuY2FuY2VsJCA9IHRoaXMuZ2V0RXhhY3RTdGF0dXMoY2FuY2VsbGVkVmFsdWVzKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RXhhY3RTdGF0dXMoXHJcbiAgICBjb25zaWdubWVudFN0YXR1czogc3RyaW5nW11cclxuICApOiBPYnNlcnZhYmxlPENvbnNpZ25tZW50W10+IHtcclxuICAgIHJldHVybiB0aGlzLm9yZGVyJC5waXBlKFxyXG4gICAgICBtYXAoKG9yZGVyKSA9PiB7XHJcbiAgICAgICAgaWYgKEJvb2xlYW4ob3JkZXIuY29uc2lnbm1lbnRzKSkge1xyXG4gICAgICAgICAgcmV0dXJuIG9yZGVyLmNvbnNpZ25tZW50cy5maWx0ZXIoKGNvbnNpZ25tZW50KSA9PlxyXG4gICAgICAgICAgICBjb25zaWdubWVudFN0YXR1cy5pbmNsdWRlcyhjb25zaWdubWVudC5zdGF0dXMpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE90aGVyU3RhdHVzKFxyXG4gICAgLi4uY29uc2lnbm1lbnRTdGF0dXM6IHN0cmluZ1tdXHJcbiAgKTogT2JzZXJ2YWJsZTxDb25zaWdubWVudFtdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5vcmRlciQucGlwZShcclxuICAgICAgbWFwKChvcmRlcikgPT4ge1xyXG4gICAgICAgIGlmIChCb29sZWFuKG9yZGVyLmNvbnNpZ25tZW50cykpIHtcclxuICAgICAgICAgIHJldHVybiBvcmRlci5jb25zaWdubWVudHMuZmlsdGVyKFxyXG4gICAgICAgICAgICAoY29uc2lnbm1lbnQpID0+ICFjb25zaWdubWVudFN0YXR1cy5pbmNsdWRlcyhjb25zaWdubWVudC5zdGF0dXMpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdfQ==