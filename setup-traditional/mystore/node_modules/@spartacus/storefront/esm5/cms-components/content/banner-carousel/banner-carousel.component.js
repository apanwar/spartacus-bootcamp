import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';
import { CmsBannerCarouselComponent as model, CmsService, ContentSlotComponentData, } from '@spartacus/core';
import { filter, map, tap } from 'rxjs/operators';
import { CmsComponentData } from '../../../cms-structure/index';
/**
 * Generic carousel that renders CMS Components.
 */
var BannerCarouselComponent = /** @class */ (function () {
    function BannerCarouselComponent(componentData, cmsService) {
        var _this = this;
        this.componentData = componentData;
        this.cmsService = cmsService;
        this.componentData$ = this.componentData.data$.pipe(filter(Boolean), tap(function (d) { return (_this.theme = d.effect + "-theme"); }));
        this.items$ = this.componentData$.pipe(map(function (data) { return data.banners.trim().split(' '); }), map(function (codes) { return codes.map(function (code) { return _this.cmsService.getComponentData(code); }); }));
        /**
         * Adds a specific theme for the carousel. The effect can be
         * used in CSS customisations.
         */
        this.theme = '';
    }
    /**
     * Returns an Obervable with an Array of Observables. This is done, so that
     * the component UI could consider to lazy load the UI components when they're
     * in the viewpoint.
     */
    BannerCarouselComponent.prototype.getItems = function () {
        return this.items$;
    };
    BannerCarouselComponent.ctorParameters = function () { return [
        { type: CmsComponentData },
        { type: CmsService }
    ]; };
    __decorate([
        HostBinding('class')
    ], BannerCarouselComponent.prototype, "theme", void 0);
    BannerCarouselComponent = __decorate([
        Component({
            selector: 'cx-banner-carousel',
            template: "<cx-carousel\n  [items]=\"getItems() | async\"\n  [template]=\"template\"\n  itemWidth=\"100%\"\n  class=\"inline-navigation\"\n></cx-carousel>\n\n<ng-template #template let-item=\"item\">\n  <ng-container\n    [cxComponentWrapper]=\"{\n      flexType: item.typeCode,\n      typeCode: item.typeCode,\n      uid: item?.uid\n    }\"\n  >\n  </ng-container>\n</ng-template>\n",
            changeDetection: ChangeDetectionStrategy.OnPush
        })
    ], BannerCarouselComponent);
    return BannerCarouselComponent;
}());
export { BannerCarouselComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFubmVyLWNhcm91c2VsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFydGFjdXMvc3RvcmVmcm9udC8iLCJzb3VyY2VzIjpbImNtcy1jb21wb25lbnRzL2NvbnRlbnQvYmFubmVyLWNhcm91c2VsL2Jhbm5lci1jYXJvdXNlbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hGLE9BQU8sRUFDTCwwQkFBMEIsSUFBSSxLQUFLLEVBQ25DLFVBQVUsRUFDVix3QkFBd0IsR0FDekIsTUFBTSxpQkFBaUIsQ0FBQztBQUV6QixPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUVoRTs7R0FFRztBQU1IO0lBbUJFLGlDQUNVLGFBQXNDLEVBQ3RDLFVBQXNCO1FBRmhDLGlCQUdJO1FBRk0sa0JBQWEsR0FBYixhQUFhLENBQXlCO1FBQ3RDLGVBQVUsR0FBVixVQUFVLENBQVk7UUFwQnhCLG1CQUFjLEdBQXNCLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDdkUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUNmLEdBQUcsQ0FBQyxVQUFDLENBQVEsSUFBSyxPQUFBLENBQUMsS0FBSSxDQUFDLEtBQUssR0FBTSxDQUFDLENBQUMsTUFBTSxXQUFRLENBQUMsRUFBbEMsQ0FBa0MsQ0FBQyxDQUN0RCxDQUFDO1FBRU0sV0FBTSxHQUVWLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUMxQixHQUFHLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBOUIsQ0FBOEIsQ0FBQyxFQUM3QyxHQUFHLENBQUMsVUFBQyxLQUFLLElBQUssT0FBQSxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQUMsSUFBSSxJQUFLLE9BQUEsS0FBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBdEMsQ0FBc0MsQ0FBQyxFQUEzRCxDQUEyRCxDQUFDLENBQzVFLENBQUM7UUFFRjs7O1dBR0c7UUFDbUIsVUFBSyxHQUFHLEVBQUUsQ0FBQztJQUs5QixDQUFDO0lBRUo7Ozs7T0FJRztJQUNILDBDQUFRLEdBQVI7UUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQzs7Z0JBWHdCLGdCQUFnQjtnQkFDbkIsVUFBVTs7SUFKVjtRQUFyQixXQUFXLENBQUMsT0FBTyxDQUFDOzBEQUFZO0lBakJ0Qix1QkFBdUI7UUFMbkMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLG9CQUFvQjtZQUM5QixnWUFBNkM7WUFDN0MsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07U0FDaEQsQ0FBQztPQUNXLHVCQUF1QixDQWdDbkM7SUFBRCw4QkFBQztDQUFBLEFBaENELElBZ0NDO1NBaENZLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQ21zQmFubmVyQ2Fyb3VzZWxDb21wb25lbnQgYXMgbW9kZWwsXHJcbiAgQ21zU2VydmljZSxcclxuICBDb250ZW50U2xvdENvbXBvbmVudERhdGEsXHJcbn0gZnJvbSAnQHNwYXJ0YWN1cy9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBDbXNDb21wb25lbnREYXRhIH0gZnJvbSAnLi4vLi4vLi4vY21zLXN0cnVjdHVyZS9pbmRleCc7XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBjYXJvdXNlbCB0aGF0IHJlbmRlcnMgQ01TIENvbXBvbmVudHMuXHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2N4LWJhbm5lci1jYXJvdXNlbCcsXHJcbiAgdGVtcGxhdGVVcmw6ICdiYW5uZXItY2Fyb3VzZWwuY29tcG9uZW50Lmh0bWwnLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmFubmVyQ2Fyb3VzZWxDb21wb25lbnQge1xyXG4gIHByaXZhdGUgY29tcG9uZW50RGF0YSQ6IE9ic2VydmFibGU8bW9kZWw+ID0gdGhpcy5jb21wb25lbnREYXRhLmRhdGEkLnBpcGUoXHJcbiAgICBmaWx0ZXIoQm9vbGVhbiksXHJcbiAgICB0YXAoKGQ6IG1vZGVsKSA9PiAodGhpcy50aGVtZSA9IGAke2QuZWZmZWN0fS10aGVtZWApKVxyXG4gICk7XHJcblxyXG4gIHByaXZhdGUgaXRlbXMkOiBPYnNlcnZhYmxlPFxyXG4gICAgT2JzZXJ2YWJsZTxDb250ZW50U2xvdENvbXBvbmVudERhdGE+W11cclxuICA+ID0gdGhpcy5jb21wb25lbnREYXRhJC5waXBlKFxyXG4gICAgbWFwKChkYXRhKSA9PiBkYXRhLmJhbm5lcnMudHJpbSgpLnNwbGl0KCcgJykpLFxyXG4gICAgbWFwKChjb2RlcykgPT4gY29kZXMubWFwKChjb2RlKSA9PiB0aGlzLmNtc1NlcnZpY2UuZ2V0Q29tcG9uZW50RGF0YShjb2RlKSkpXHJcbiAgKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIHNwZWNpZmljIHRoZW1lIGZvciB0aGUgY2Fyb3VzZWwuIFRoZSBlZmZlY3QgY2FuIGJlXHJcbiAgICogdXNlZCBpbiBDU1MgY3VzdG9taXNhdGlvbnMuXHJcbiAgICovXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIHRoZW1lID0gJyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBjb21wb25lbnREYXRhOiBDbXNDb21wb25lbnREYXRhPG1vZGVsPixcclxuICAgIHByaXZhdGUgY21zU2VydmljZTogQ21zU2VydmljZVxyXG4gICkge31cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBPYmVydmFibGUgd2l0aCBhbiBBcnJheSBvZiBPYnNlcnZhYmxlcy4gVGhpcyBpcyBkb25lLCBzbyB0aGF0XHJcbiAgICogdGhlIGNvbXBvbmVudCBVSSBjb3VsZCBjb25zaWRlciB0byBsYXp5IGxvYWQgdGhlIFVJIGNvbXBvbmVudHMgd2hlbiB0aGV5J3JlXHJcbiAgICogaW4gdGhlIHZpZXdwb2ludC5cclxuICAgKi9cclxuICBnZXRJdGVtcygpOiBPYnNlcnZhYmxlPE9ic2VydmFibGU8Q29udGVudFNsb3RDb21wb25lbnREYXRhPltdPiB7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtcyQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==