import { __decorate, __param } from "tslib";
import { DOCUMENT } from '@angular/common';
import { Component, Inject, Input, ViewChild } from '@angular/core';
import { StoreDataService, PointOfService } from '@spartacus/core';
import { ICON_TYPE } from './../../../../misc/icon/icon.model';
var StoreFinderListComponent = /** @class */ (function () {
    function StoreFinderListComponent(storeDataService, document) {
        this.storeDataService = storeDataService;
        this.document = document;
        this.iconTypes = ICON_TYPE;
        this.isDetailsModeVisible = false;
    }
    StoreFinderListComponent.prototype.centerStoreOnMapByIndex = function (index, location) {
        this.showStoreDetails(location);
        this.selectedStoreIndex = index;
        this.selectedStore = location;
        this.storeMap.centerMap(this.storeDataService.getStoreLatitude(this.locations.stores[index]), this.storeDataService.getStoreLongitude(this.locations.stores[index]));
    };
    StoreFinderListComponent.prototype.selectStoreItemList = function (index) {
        this.selectedStoreIndex = index;
        var storeListItem = this.document.getElementById('item-' + index);
        storeListItem.scrollIntoView({
            behavior: 'smooth',
            block: 'center',
        });
    };
    StoreFinderListComponent.prototype.showStoreDetails = function (location) {
        this.isDetailsModeVisible = true;
        this.storeDetails = location;
    };
    StoreFinderListComponent.prototype.hideStoreDetails = function () {
        this.isDetailsModeVisible = false;
        this.selectedStoreIndex = undefined;
        this.selectedStore = undefined;
        this.storeMap.renderMap();
    };
    StoreFinderListComponent.ctorParameters = function () { return [
        { type: StoreDataService },
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    __decorate([
        Input()
    ], StoreFinderListComponent.prototype, "locations", void 0);
    __decorate([
        Input()
    ], StoreFinderListComponent.prototype, "useMylocation", void 0);
    __decorate([
        ViewChild('storeMap')
    ], StoreFinderListComponent.prototype, "storeMap", void 0);
    StoreFinderListComponent = __decorate([
        Component({
            selector: 'cx-store-finder-list',
            template: "<ng-container *ngIf=\"locations\">\r\n  <div class=\"container mb-2\">\r\n    <div class=\"row\" *ngIf=\"locations?.pagination\">\r\n      <div class=\"col-md-12\">\r\n        <cx-store-finder-pagination-details\r\n          [pagination]=\"locations.pagination\"\r\n        ></cx-store-finder-pagination-details>\r\n      </div>\r\n      <div class=\"col-md-2 text-left cx-back-wrapper\">\r\n        <button\r\n          class=\"btn btn-block btn-action\"\r\n          *ngIf=\"isDetailsModeVisible\"\r\n          (click)=\"hideStoreDetails()\"\r\n        >\r\n          <cx-icon [type]=\"iconTypes.CARET_LEFT\"></cx-icon>\r\n          {{ 'storeFinder.backToList' | cxTranslate }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"locations?.stores\" class=\"row cx-columns\">\r\n      <div class=\"col-md-4 cx-address-col\">\r\n        <div class=\"cx-store-details\" *ngIf=\"isDetailsModeVisible\">\r\n          <cx-store-finder-store-description\r\n            [location]=\"storeDetails\"\r\n            [disableMap]=\"true\"\r\n          ></cx-store-finder-store-description>\r\n        </div>\r\n        <ol class=\"cx-list\" *ngIf=\"!isDetailsModeVisible\">\r\n          <li\r\n            *ngFor=\"let location of locations?.stores; let i = index\"\r\n            id=\"{{ 'item-' + i }}\"\r\n            [ngClass]=\"{\r\n              'cx-selected-item': selectedStoreIndex === i\r\n            }\"\r\n            class=\"cx-list-items\"\r\n          >\r\n            <cx-store-finder-list-item\r\n              [location]=\"location\"\r\n              [locationIndex]=\"i\"\r\n              [displayDistance]=\"useMylocation\"\r\n              [useClickEvent]=\"true\"\r\n              (storeItemClick)=\"centerStoreOnMapByIndex($event, location)\"\r\n              [listOrderLabel]=\"\r\n                i +\r\n                locations.pagination.currentPage *\r\n                  locations.pagination.pageSize +\r\n                1\r\n              \"\r\n            ></cx-store-finder-list-item>\r\n          </li>\r\n        </ol>\r\n      </div>\r\n      <div class=\"col-md-8 cx-map-col\">\r\n        <cx-store-finder-map\r\n          #storeMap\r\n          [locations]=\"locations.stores\"\r\n          (selectedStoreItem)=\"selectStoreItemList($event)\"\r\n        ></cx-store-finder-map>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- mobile tabs for column set only -->\r\n\r\n    <div *ngIf=\"locations?.stores\" class=\"cx-columns-mobile\">\r\n      <ngb-tabset justify=\"center\">\r\n        <ngb-tab>\r\n          <ng-template ngbTabTitle>\r\n            {{ 'storeFinder.listView' | cxTranslate }}\r\n          </ng-template>\r\n          <ng-template ngbTabContent>\r\n            <div class=\"cx-address-col\">\r\n              <div class=\"cx-store-details\" *ngIf=\"isDetailsModeVisible\">\r\n                <cx-store-finder-store-description\r\n                  [location]=\"storeDetails\"\r\n                  [disableMap]=\"true\"\r\n                ></cx-store-finder-store-description>\r\n              </div>\r\n              <ol class=\"cx-list\" *ngIf=\"!isDetailsModeVisible\">\r\n                <li\r\n                  *ngFor=\"let location of locations?.stores; let i = index\"\r\n                  id=\"{{ 'item-' + i }}\"\r\n                  [ngClass]=\"{\r\n                    'cx-selected-item': selectedStoreIndex === i\r\n                  }\"\r\n                  class=\"cx-list-items\"\r\n                >\r\n                  <cx-store-finder-list-item\r\n                    [location]=\"location\"\r\n                    [locationIndex]=\"i\"\r\n                    [displayDistance]=\"useMylocation\"\r\n                    [useClickEvent]=\"true\"\r\n                    (storeItemClick)=\"centerStoreOnMapByIndex($event, location)\"\r\n                    [listOrderLabel]=\"\r\n                      i +\r\n                      locations.pagination.currentPage *\r\n                        locations.pagination.pageSize +\r\n                      1\r\n                    \"\r\n                  ></cx-store-finder-list-item>\r\n                </li>\r\n              </ol>\r\n            </div>\r\n          </ng-template>\r\n        </ngb-tab>\r\n        <ngb-tab>\r\n          <ng-template ngbTabTitle>\r\n            {{ 'storeFinder.mapView' | cxTranslate }}\r\n          </ng-template>\r\n          <ng-template ngbTabContent>\r\n            <div class=\"cx-map-col\">\r\n              <cx-store-finder-map\r\n                #storeMap\r\n                [locations]=\"selectedStore ? [selectedStore] : locations.stores\"\r\n                (selectedStoreItem)=\"selectStoreItemList($event)\"\r\n              ></cx-store-finder-map>\r\n            </div>\r\n          </ng-template>\r\n        </ngb-tab>\r\n      </ngb-tabset>\r\n    </div>\r\n\r\n    <!-- mobile tabs end -->\r\n\r\n    <div *ngIf=\"!locations?.stores\" class=\"row\">\r\n      <div class=\"col-md-12 cx-not-found\">\r\n        {{ 'storeFinder.noStoreFound' | cxTranslate }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n"
        }),
        __param(1, Inject(DOCUMENT))
    ], StoreFinderListComponent);
    return StoreFinderListComponent;
}());
export { StoreFinderListComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmUtZmluZGVyLWxpc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHNwYXJ0YWN1cy9zdG9yZWZyb250LyIsInNvdXJjZXMiOlsiY21zLWNvbXBvbmVudHMvc3RvcmVmaW5kZXIvY29tcG9uZW50cy9zdG9yZS1maW5kZXItc2VhcmNoLXJlc3VsdC9zdG9yZS1maW5kZXItbGlzdC9zdG9yZS1maW5kZXItbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVuRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFNL0Q7SUFjRSxrQ0FDVSxnQkFBa0MsRUFDaEIsUUFBYTtRQUQvQixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2hCLGFBQVEsR0FBUixRQUFRLENBQUs7UUFKekMsY0FBUyxHQUFHLFNBQVMsQ0FBQztRQU1wQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsS0FBSyxDQUFDO0lBQ3BDLENBQUM7SUFFRCwwREFBdUIsR0FBdkIsVUFBd0IsS0FBYSxFQUFFLFFBQXdCO1FBQzdELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUNyQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFDcEUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQ3RFLENBQUM7SUFDSixDQUFDO0lBRUQsc0RBQW1CLEdBQW5CLFVBQW9CLEtBQWE7UUFDL0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUM7UUFDcEUsYUFBYSxDQUFDLGNBQWMsQ0FBQztZQUMzQixRQUFRLEVBQUUsUUFBUTtZQUNsQixLQUFLLEVBQUUsUUFBUTtTQUNoQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsbURBQWdCLEdBQWhCLFVBQWlCLFFBQXdCO1FBQ3ZDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7UUFDakMsSUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUM7SUFDL0IsQ0FBQztJQUVELG1EQUFnQixHQUFoQjtRQUNFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUM7UUFDbEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLFNBQVMsQ0FBQztRQUNwQyxJQUFJLENBQUMsYUFBYSxHQUFHLFNBQVMsQ0FBQztRQUMvQixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQzVCLENBQUM7O2dCQW5DMkIsZ0JBQWdCO2dEQUN6QyxNQUFNLFNBQUMsUUFBUTs7SUFkbEI7UUFEQyxLQUFLLEVBQUU7K0RBQ087SUFFZjtRQURDLEtBQUssRUFBRTttRUFDZTtJQUV2QjtRQURDLFNBQVMsQ0FBQyxVQUFVLENBQUM7OERBQ1k7SUFOdkIsd0JBQXdCO1FBSnBDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxzQkFBc0I7WUFDaEMscS9KQUFpRDtTQUNsRCxDQUFDO1FBaUJHLFdBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO09BaEJSLHdCQUF3QixDQW1EcEM7SUFBRCwrQkFBQztDQUFBLEFBbkRELElBbURDO1NBbkRZLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3QsIElucHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3RvcmVEYXRhU2VydmljZSwgUG9pbnRPZlNlcnZpY2UgfSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xyXG5pbXBvcnQgeyBTdG9yZUZpbmRlck1hcENvbXBvbmVudCB9IGZyb20gJy4uLy4uL3N0b3JlLWZpbmRlci1tYXAvc3RvcmUtZmluZGVyLW1hcC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBJQ09OX1RZUEUgfSBmcm9tICcuLy4uLy4uLy4uLy4uL21pc2MvaWNvbi9pY29uLm1vZGVsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnY3gtc3RvcmUtZmluZGVyLWxpc3QnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9zdG9yZS1maW5kZXItbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTdG9yZUZpbmRlckxpc3RDb21wb25lbnQge1xyXG4gIEBJbnB1dCgpXHJcbiAgbG9jYXRpb25zOiBhbnk7XHJcbiAgQElucHV0KClcclxuICB1c2VNeWxvY2F0aW9uOiBib29sZWFuO1xyXG4gIEBWaWV3Q2hpbGQoJ3N0b3JlTWFwJylcclxuICBzdG9yZU1hcDogU3RvcmVGaW5kZXJNYXBDb21wb25lbnQ7XHJcblxyXG4gIHNlbGVjdGVkU3RvcmU6IFBvaW50T2ZTZXJ2aWNlO1xyXG4gIHNlbGVjdGVkU3RvcmVJbmRleDogbnVtYmVyO1xyXG4gIGlzRGV0YWlsc01vZGVWaXNpYmxlOiBib29sZWFuO1xyXG4gIHN0b3JlRGV0YWlsczogUG9pbnRPZlNlcnZpY2U7XHJcbiAgaWNvblR5cGVzID0gSUNPTl9UWVBFO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgc3RvcmVEYXRhU2VydmljZTogU3RvcmVEYXRhU2VydmljZSxcclxuICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueVxyXG4gICkge1xyXG4gICAgdGhpcy5pc0RldGFpbHNNb2RlVmlzaWJsZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgY2VudGVyU3RvcmVPbk1hcEJ5SW5kZXgoaW5kZXg6IG51bWJlciwgbG9jYXRpb246IFBvaW50T2ZTZXJ2aWNlKTogdm9pZCB7XHJcbiAgICB0aGlzLnNob3dTdG9yZURldGFpbHMobG9jYXRpb24pO1xyXG4gICAgdGhpcy5zZWxlY3RlZFN0b3JlSW5kZXggPSBpbmRleDtcclxuICAgIHRoaXMuc2VsZWN0ZWRTdG9yZSA9IGxvY2F0aW9uO1xyXG4gICAgdGhpcy5zdG9yZU1hcC5jZW50ZXJNYXAoXHJcbiAgICAgIHRoaXMuc3RvcmVEYXRhU2VydmljZS5nZXRTdG9yZUxhdGl0dWRlKHRoaXMubG9jYXRpb25zLnN0b3Jlc1tpbmRleF0pLFxyXG4gICAgICB0aGlzLnN0b3JlRGF0YVNlcnZpY2UuZ2V0U3RvcmVMb25naXR1ZGUodGhpcy5sb2NhdGlvbnMuc3RvcmVzW2luZGV4XSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RTdG9yZUl0ZW1MaXN0KGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRTdG9yZUluZGV4ID0gaW5kZXg7XHJcbiAgICBjb25zdCBzdG9yZUxpc3RJdGVtID0gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS0nICsgaW5kZXgpO1xyXG4gICAgc3RvcmVMaXN0SXRlbS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICAgICAgYmxvY2s6ICdjZW50ZXInLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93U3RvcmVEZXRhaWxzKGxvY2F0aW9uOiBQb2ludE9mU2VydmljZSkge1xyXG4gICAgdGhpcy5pc0RldGFpbHNNb2RlVmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLnN0b3JlRGV0YWlscyA9IGxvY2F0aW9uO1xyXG4gIH1cclxuXHJcbiAgaGlkZVN0b3JlRGV0YWlscygpIHtcclxuICAgIHRoaXMuaXNEZXRhaWxzTW9kZVZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuc2VsZWN0ZWRTdG9yZUluZGV4ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5zZWxlY3RlZFN0b3JlID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5zdG9yZU1hcC5yZW5kZXJNYXAoKTtcclxuICB9XHJcbn1cclxuIl19