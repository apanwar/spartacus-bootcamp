import { __decorate } from "tslib";
import { Directive, HostBinding, HostListener } from '@angular/core';
import { BaseFocusDirective } from '../base/base-focus.directive';
/**
 * Directive implementation that adds a CSS class to the host element
 * when the moused is used to focus an element. As soon as the keyboard
 * is used, the class is removed.
 */
let VisibleFocusDirective = class VisibleFocusDirective extends BaseFocusDirective {
    constructor() {
        super(...arguments);
        this.defaultConfig = { disableMouseFocus: true };
        /** controls a polyfill class for the lacking focus-visible feature */
        this.mouseFocus = false;
    }
    handleMousedown() {
        if (this.shouldFocusVisible) {
            this.mouseFocus = true;
        }
    }
    handleKeydown() {
        if (this.shouldFocusVisible) {
            this.mouseFocus = false;
        }
    }
    get shouldFocusVisible() {
        var _a;
        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.disableMouseFocus;
    }
};
__decorate([
    HostBinding('class.mouse-focus')
], VisibleFocusDirective.prototype, "mouseFocus", void 0);
__decorate([
    HostListener('mousedown')
], VisibleFocusDirective.prototype, "handleMousedown", null);
__decorate([
    HostListener('keydown')
], VisibleFocusDirective.prototype, "handleKeydown", null);
VisibleFocusDirective = __decorate([
    Directive() // selector: '[cxVisibleFocus]'
], VisibleFocusDirective);
export { VisibleFocusDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaWJsZS1mb2N1cy5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL3N0b3JlZnJvbnQvIiwic291cmNlcyI6WyJsYXlvdXQvYTExeS9rZXlib2FyZC1mb2N1cy92aXNpYmxlL3Zpc2libGUtZm9jdXMuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFHbEU7Ozs7R0FJRztBQUVILElBQWEscUJBQXFCLEdBQWxDLE1BQWEscUJBQXNCLFNBQVEsa0JBQWtCO0lBQTdEOztRQUNZLGtCQUFhLEdBQXVCLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFLMUUsc0VBQXNFO1FBQ3BDLGVBQVUsR0FBRyxLQUFLLENBQUM7SUFpQnZELENBQUM7SUFmNEIsZUFBZTtRQUN4QyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUN4QjtJQUNILENBQUM7SUFFd0IsYUFBYTtRQUNwQyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUN6QjtJQUNILENBQUM7SUFFRCxJQUFjLGtCQUFrQjs7UUFDOUIsYUFBTyxJQUFJLENBQUMsTUFBTSwwQ0FBRSxpQkFBaUIsQ0FBQztJQUN4QyxDQUFDO0NBQ0YsQ0FBQTtBQWpCbUM7SUFBakMsV0FBVyxDQUFDLG1CQUFtQixDQUFDO3lEQUFvQjtBQUUxQjtJQUExQixZQUFZLENBQUMsV0FBVyxDQUFDOzREQUl6QjtBQUV3QjtJQUF4QixZQUFZLENBQUMsU0FBUyxDQUFDOzBEQUl2QjtBQW5CVSxxQkFBcUI7SUFEakMsU0FBUyxFQUFFLENBQUMsK0JBQStCO0dBQy9CLHFCQUFxQixDQXdCakM7U0F4QlkscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJhc2VGb2N1c0RpcmVjdGl2ZSB9IGZyb20gJy4uL2Jhc2UvYmFzZS1mb2N1cy5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBWaXNpYmxlRm9jdXNDb25maWcgfSBmcm9tICcuLi9rZXlib2FyZC1mb2N1cy5tb2RlbCc7XHJcblxyXG4vKipcclxuICogRGlyZWN0aXZlIGltcGxlbWVudGF0aW9uIHRoYXQgYWRkcyBhIENTUyBjbGFzcyB0byB0aGUgaG9zdCBlbGVtZW50XHJcbiAqIHdoZW4gdGhlIG1vdXNlZCBpcyB1c2VkIHRvIGZvY3VzIGFuIGVsZW1lbnQuIEFzIHNvb24gYXMgdGhlIGtleWJvYXJkXHJcbiAqIGlzIHVzZWQsIHRoZSBjbGFzcyBpcyByZW1vdmVkLlxyXG4gKi9cclxuQERpcmVjdGl2ZSgpIC8vIHNlbGVjdG9yOiAnW2N4VmlzaWJsZUZvY3VzXSdcclxuZXhwb3J0IGNsYXNzIFZpc2libGVGb2N1c0RpcmVjdGl2ZSBleHRlbmRzIEJhc2VGb2N1c0RpcmVjdGl2ZSB7XHJcbiAgcHJvdGVjdGVkIGRlZmF1bHRDb25maWc6IFZpc2libGVGb2N1c0NvbmZpZyA9IHsgZGlzYWJsZU1vdXNlRm9jdXM6IHRydWUgfTtcclxuXHJcbiAgLy8gQElucHV0KCdjeFZpc2libGVGb2N1cycpXHJcbiAgcHJvdGVjdGVkIGNvbmZpZzogVmlzaWJsZUZvY3VzQ29uZmlnO1xyXG5cclxuICAvKiogY29udHJvbHMgYSBwb2x5ZmlsbCBjbGFzcyBmb3IgdGhlIGxhY2tpbmcgZm9jdXMtdmlzaWJsZSBmZWF0dXJlICovXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5tb3VzZS1mb2N1cycpIG1vdXNlRm9jdXMgPSBmYWxzZTtcclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignbW91c2Vkb3duJykgaGFuZGxlTW91c2Vkb3duKCkge1xyXG4gICAgaWYgKHRoaXMuc2hvdWxkRm9jdXNWaXNpYmxlKSB7XHJcbiAgICAgIHRoaXMubW91c2VGb2N1cyA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdrZXlkb3duJykgaGFuZGxlS2V5ZG93bigpIHtcclxuICAgIGlmICh0aGlzLnNob3VsZEZvY3VzVmlzaWJsZSkge1xyXG4gICAgICB0aGlzLm1vdXNlRm9jdXMgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXQgc2hvdWxkRm9jdXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnPy5kaXNhYmxlTW91c2VGb2N1cztcclxuICB9XHJcbn1cclxuIl19