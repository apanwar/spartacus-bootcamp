import { __decorate, __param } from "tslib";
import { DOCUMENT } from '@angular/common';
import { Inject, } from '@angular/core';
import { DIALOG_TYPE, } from '../config';
let LaunchRenderStrategy = class LaunchRenderStrategy {
    constructor(document, rendererFactory) {
        this.document = document;
        this.rendererFactory = rendererFactory;
        // List of called references; only used for rendered elements
        this.renderedCallers = [];
        /**
         * Classes to apply to the component when the dialog is a DIALOG
         */
        this.dialogClasses = ['d-block', 'fade', 'modal', 'show'];
        /**
         * Classes to apply to the component when the dialog is a POPOVER
         */
        this.popoverClasses = ['cx-dialog-popover'];
        /**
         * Classes to apply to the component when the dialog is a SIDEBAR_END
         */
        this.sidebarEndClasses = ['cx-sidebar-end'];
        /**
         * Classes to apply to the component when the dialog is a SIDEBAR_START
         */
        this.sidebarStartClasses = ['cx-sidebar-start'];
        this.renderer = rendererFactory.createRenderer(null, null);
    }
    /**
     * Determines if element should render
     *
     * @param caller
     * @param config
     */
    shouldRender(caller, config) {
        return (Boolean(config.component) &&
            (this.renderedCallers.some((el) => el.caller === caller)
                ? !!config.multi
                : true));
    }
    applyClasses(component, dialogType) {
        let classes = [];
        // TODO: make classes configurable
        switch (dialogType) {
            case DIALOG_TYPE.DIALOG:
                classes = this.dialogClasses;
                this.renderer.addClass(this.document.body, 'modal-open');
                break;
            case DIALOG_TYPE.POPOVER:
                classes = this.popoverClasses;
                break;
            case DIALOG_TYPE.SIDEBAR_END:
                classes = this.sidebarEndClasses;
                break;
            case DIALOG_TYPE.SIDEBAR_START:
                classes = this.sidebarStartClasses;
                break;
        }
        for (const newClass of classes) {
            this.renderer.addClass(component.location.nativeElement, newClass);
        }
    }
    /**
     * Method to call when rendered element is destroyed
     * The element will be removed from the list of rendered elements
     *
     * @param caller
     * @param _config optional parameters used in children strategies
     */
    remove(caller, config) {
        var _a;
        this.renderedCallers = this.renderedCallers.filter((el) => el.caller !== caller);
        if (((_a = config) === null || _a === void 0 ? void 0 : _a.dialogType) === DIALOG_TYPE.DIALOG) {
            this.renderer.removeClass(this.document.body, 'modal-open');
        }
    }
    getPriority() {
        return -10 /* LOW */; // low, as it's a default matcher
    }
};
LaunchRenderStrategy = __decorate([
    __param(0, Inject(DOCUMENT))
], LaunchRenderStrategy);
export { LaunchRenderStrategy };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF1bmNoLXJlbmRlci5zdHJhdGVneS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFydGFjdXMvc3RvcmVmcm9udC8iLCJzb3VyY2VzIjpbImxheW91dC9sYXVuY2gtZGlhbG9nL3NlcnZpY2VzL2xhdW5jaC1yZW5kZXIuc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBRUwsTUFBTSxHQUlQLE1BQU0sZUFBZSxDQUFDO0FBR3ZCLE9BQU8sRUFDTCxXQUFXLEdBSVosTUFBTSxXQUFXLENBQUM7QUFFbkIsSUFBc0Isb0JBQW9CLEdBQTFDLE1BQXNCLG9CQUFvQjtJQTJCeEMsWUFDOEIsUUFBYSxFQUMvQixlQUFpQztRQURmLGFBQVEsR0FBUixRQUFRLENBQUs7UUFDL0Isb0JBQWUsR0FBZixlQUFlLENBQWtCO1FBNUI3Qyw2REFBNkQ7UUFDbkQsb0JBQWUsR0FJcEIsRUFBRSxDQUFDO1FBRVI7O1dBRUc7UUFDTyxrQkFBYSxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0Q7O1dBRUc7UUFDTyxtQkFBYyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNqRDs7V0FFRztRQUNPLHNCQUFpQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNqRDs7V0FFRztRQUNPLHdCQUFtQixHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQVFuRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFvQkQ7Ozs7O09BS0c7SUFDTyxZQUFZLENBQ3BCLE1BQThCLEVBQzlCLE1BQW9CO1FBRXBCLE9BQU8sQ0FDTCxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztZQUN6QixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQztnQkFDdEQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSztnQkFDaEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUNWLENBQUM7SUFDSixDQUFDO0lBRVMsWUFBWSxDQUNwQixTQUE0QixFQUM1QixVQUF1QjtRQUV2QixJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFFakIsa0NBQWtDO1FBQ2xDLFFBQVEsVUFBVSxFQUFFO1lBQ2xCLEtBQUssV0FBVyxDQUFDLE1BQU07Z0JBQ3JCLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO2dCQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztnQkFDekQsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLE9BQU87Z0JBQ3RCLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO2dCQUM5QixNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsV0FBVztnQkFDMUIsT0FBTyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztnQkFDakMsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLGFBQWE7Z0JBQzVCLE9BQU8sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7Z0JBQ25DLE1BQU07U0FDVDtRQUVELEtBQUssTUFBTSxRQUFRLElBQUksT0FBTyxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQ3BFO0lBQ0gsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNJLE1BQU0sQ0FBQyxNQUE4QixFQUFFLE1BQXFCOztRQUNqRSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUNoRCxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQzdCLENBQUM7UUFFRixJQUFJLE9BQUMsTUFBdUIsMENBQUUsVUFBVSxNQUFLLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDL0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7U0FDN0Q7SUFDSCxDQUFDO0lBRUQsV0FBVztRQUNULHFCQUFvQixDQUFDLGlDQUFpQztJQUN4RCxDQUFDO0NBQ0YsQ0FBQTtBQXRIcUIsb0JBQW9CO0lBNEJyQyxXQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQTtHQTVCQyxvQkFBb0IsQ0FzSHpDO1NBdEhxQixvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7XHJcbiAgQ29tcG9uZW50UmVmLFxyXG4gIEluamVjdCxcclxuICBSZW5kZXJlcjIsXHJcbiAgUmVuZGVyZXJGYWN0b3J5MixcclxuICBWaWV3Q29udGFpbmVyUmVmLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBBcHBsaWNhYmxlLCBQcmlvcml0eSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtcclxuICBESUFMT0dfVFlQRSxcclxuICBMYXVuY2hEaWFsb2csXHJcbiAgTGF1bmNoT3B0aW9ucyxcclxuICBMQVVOQ0hfQ0FMTEVSLFxyXG59IGZyb20gJy4uL2NvbmZpZyc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTGF1bmNoUmVuZGVyU3RyYXRlZ3kgaW1wbGVtZW50cyBBcHBsaWNhYmxlIHtcclxuICAvLyBMaXN0IG9mIGNhbGxlZCByZWZlcmVuY2VzOyBvbmx5IHVzZWQgZm9yIHJlbmRlcmVkIGVsZW1lbnRzXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkQ2FsbGVyczogQXJyYXk8e1xyXG4gICAgY2FsbGVyOiBMQVVOQ0hfQ0FMTEVSIHwgc3RyaW5nO1xyXG4gICAgZWxlbWVudD86IGFueTtcclxuICAgIGNvbXBvbmVudD86IENvbXBvbmVudFJlZjxhbnk+O1xyXG4gIH0+ID0gW107XHJcblxyXG4gIC8qKlxyXG4gICAqIENsYXNzZXMgdG8gYXBwbHkgdG8gdGhlIGNvbXBvbmVudCB3aGVuIHRoZSBkaWFsb2cgaXMgYSBESUFMT0dcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZGlhbG9nQ2xhc3NlcyA9IFsnZC1ibG9jaycsICdmYWRlJywgJ21vZGFsJywgJ3Nob3cnXTtcclxuICAvKipcclxuICAgKiBDbGFzc2VzIHRvIGFwcGx5IHRvIHRoZSBjb21wb25lbnQgd2hlbiB0aGUgZGlhbG9nIGlzIGEgUE9QT1ZFUlxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBwb3BvdmVyQ2xhc3NlcyA9IFsnY3gtZGlhbG9nLXBvcG92ZXInXTtcclxuICAvKipcclxuICAgKiBDbGFzc2VzIHRvIGFwcGx5IHRvIHRoZSBjb21wb25lbnQgd2hlbiB0aGUgZGlhbG9nIGlzIGEgU0lERUJBUl9FTkRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc2lkZWJhckVuZENsYXNzZXMgPSBbJ2N4LXNpZGViYXItZW5kJ107XHJcbiAgLyoqXHJcbiAgICogQ2xhc3NlcyB0byBhcHBseSB0byB0aGUgY29tcG9uZW50IHdoZW4gdGhlIGRpYWxvZyBpcyBhIFNJREVCQVJfU1RBUlRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgc2lkZWJhclN0YXJ0Q2xhc3NlcyA9IFsnY3gtc2lkZWJhci1zdGFydCddO1xyXG5cclxuICBwcm90ZWN0ZWQgcmVuZGVyZXI6IFJlbmRlcmVyMjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KERPQ1VNRU5UKSBwcm90ZWN0ZWQgZG9jdW1lbnQ6IGFueSxcclxuICAgIHByb3RlY3RlZCByZW5kZXJlckZhY3Rvcnk6IFJlbmRlcmVyRmFjdG9yeTJcclxuICApIHtcclxuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlckZhY3RvcnkuY3JlYXRlUmVuZGVyZXIobnVsbCwgbnVsbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW5kZXIgbWV0aG9kIHRvIGltcGxlbWVudCBiYXNlZCBvbiB0aGUgc3RyYXRlZ3lcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjb25maWcgTGF1bmNoIGNvbmZpZ3VyYXRpb25cclxuICAgKi9cclxuICBhYnN0cmFjdCByZW5kZXIoXHJcbiAgICBjb25maWc6IExhdW5jaE9wdGlvbnMsXHJcbiAgICBjYWxsZXI6IExBVU5DSF9DQUxMRVIgfCBzdHJpbmcsXHJcbiAgICB2Y3I/OiBWaWV3Q29udGFpbmVyUmVmXHJcbiAgKTogdm9pZCB8IE9ic2VydmFibGU8Q29tcG9uZW50UmVmPGFueT4+O1xyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBzdHJhdGVneSBpcyB0aGUgcmlnaHQgb25lIGZvciB0aGUgcHJvdmlkZWQgY29uZmlndXJhdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNvbmZpZ1xyXG4gICAqL1xyXG4gIGFic3RyYWN0IGhhc01hdGNoKGNvbmZpZzogTGF1bmNoT3B0aW9ucyk6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgZWxlbWVudCBzaG91bGQgcmVuZGVyXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGVyXHJcbiAgICogQHBhcmFtIGNvbmZpZ1xyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBzaG91bGRSZW5kZXIoXHJcbiAgICBjYWxsZXI6IExBVU5DSF9DQUxMRVIgfCBzdHJpbmcsXHJcbiAgICBjb25maWc6IExhdW5jaERpYWxvZ1xyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgQm9vbGVhbihjb25maWcuY29tcG9uZW50KSAmJlxyXG4gICAgICAodGhpcy5yZW5kZXJlZENhbGxlcnMuc29tZSgoZWwpID0+IGVsLmNhbGxlciA9PT0gY2FsbGVyKVxyXG4gICAgICAgID8gISFjb25maWcubXVsdGlcclxuICAgICAgICA6IHRydWUpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGFwcGx5Q2xhc3NlcyhcclxuICAgIGNvbXBvbmVudDogQ29tcG9uZW50UmVmPGFueT4sXHJcbiAgICBkaWFsb2dUeXBlOiBESUFMT0dfVFlQRVxyXG4gICk6IHZvaWQge1xyXG4gICAgbGV0IGNsYXNzZXMgPSBbXTtcclxuXHJcbiAgICAvLyBUT0RPOiBtYWtlIGNsYXNzZXMgY29uZmlndXJhYmxlXHJcbiAgICBzd2l0Y2ggKGRpYWxvZ1R5cGUpIHtcclxuICAgICAgY2FzZSBESUFMT0dfVFlQRS5ESUFMT0c6XHJcbiAgICAgICAgY2xhc3NlcyA9IHRoaXMuZGlhbG9nQ2xhc3NlcztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZG9jdW1lbnQuYm9keSwgJ21vZGFsLW9wZW4nKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBESUFMT0dfVFlQRS5QT1BPVkVSOlxyXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLnBvcG92ZXJDbGFzc2VzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIERJQUxPR19UWVBFLlNJREVCQVJfRU5EOlxyXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLnNpZGViYXJFbmRDbGFzc2VzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIERJQUxPR19UWVBFLlNJREVCQVJfU1RBUlQ6XHJcbiAgICAgICAgY2xhc3NlcyA9IHRoaXMuc2lkZWJhclN0YXJ0Q2xhc3NlcztcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IG5ld0NsYXNzIG9mIGNsYXNzZXMpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhjb21wb25lbnQubG9jYXRpb24ubmF0aXZlRWxlbWVudCwgbmV3Q2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHRvIGNhbGwgd2hlbiByZW5kZXJlZCBlbGVtZW50IGlzIGRlc3Ryb3llZFxyXG4gICAqIFRoZSBlbGVtZW50IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9mIHJlbmRlcmVkIGVsZW1lbnRzXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGVyXHJcbiAgICogQHBhcmFtIF9jb25maWcgb3B0aW9uYWwgcGFyYW1ldGVycyB1c2VkIGluIGNoaWxkcmVuIHN0cmF0ZWdpZXNcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlKGNhbGxlcjogTEFVTkNIX0NBTExFUiB8IHN0cmluZywgY29uZmlnOiBMYXVuY2hPcHRpb25zKTogdm9pZCB7XHJcbiAgICB0aGlzLnJlbmRlcmVkQ2FsbGVycyA9IHRoaXMucmVuZGVyZWRDYWxsZXJzLmZpbHRlcihcclxuICAgICAgKGVsKSA9PiBlbC5jYWxsZXIgIT09IGNhbGxlclxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoKGNvbmZpZyBhcyBMYXVuY2hEaWFsb2cpPy5kaWFsb2dUeXBlID09PSBESUFMT0dfVFlQRS5ESUFMT0cpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmRvY3VtZW50LmJvZHksICdtb2RhbC1vcGVuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQcmlvcml0eSgpOiBQcmlvcml0eSB7XHJcbiAgICByZXR1cm4gUHJpb3JpdHkuTE9XOyAvLyBsb3csIGFzIGl0J3MgYSBkZWZhdWx0IG1hdGNoZXJcclxuICB9XHJcbn1cclxuIl19