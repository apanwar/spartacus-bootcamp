import { InjectionToken } from '@angular/core';
import { combineReducers, } from '@ngrx/store';
import { loaderReducer } from '../../../state/utils/loader/loader.reducer';
import { AuthActions } from '../actions/index';
import { CLIENT_TOKEN_DATA } from '../auth-state';
import * as fromUserTokenReducer from './user-token.reducer';
export function getReducers() {
    return {
        userToken: combineReducers({ token: fromUserTokenReducer.reducer }),
        clientToken: loaderReducer(CLIENT_TOKEN_DATA),
    };
}
export const reducerToken = new InjectionToken('AuthReducers');
export const reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearAuthState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = Object.assign(Object.assign({}, state), { userToken: undefined });
        }
        return reducer(state, action);
    };
}
export const metaReducers = [clearAuthState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvYXV0aC9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFJTCxlQUFlLEdBRWhCLE1BQU0sYUFBYSxDQUFDO0FBQ3JCLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDL0MsT0FBTyxFQUFhLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sS0FBSyxvQkFBb0IsTUFBTSxzQkFBc0IsQ0FBQztBQUU3RCxNQUFNLFVBQVUsV0FBVztJQUN6QixPQUFPO1FBQ0wsU0FBUyxFQUFFLGVBQWUsQ0FBQyxFQUFFLEtBQUssRUFBRSxvQkFBb0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuRSxXQUFXLEVBQUUsYUFBYSxDQUFjLGlCQUFpQixDQUFDO0tBQzNELENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUVwQixJQUFJLGNBQWMsQ0FBOEIsY0FBYyxDQUFDLENBQUM7QUFFckUsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFhO0lBQ3ZDLE9BQU8sRUFBRSxZQUFZO0lBQ3JCLFVBQVUsRUFBRSxXQUFXO0NBQ3hCLENBQUM7QUFFRixNQUFNLFVBQVUsY0FBYyxDQUM1QixPQUF5QztJQUV6QyxPQUFPLFVBQVUsS0FBSyxFQUFFLE1BQU07UUFDNUIsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDdEMsS0FBSyxtQ0FDQSxLQUFLLEtBQ1IsU0FBUyxFQUFFLFNBQVMsR0FDckIsQ0FBQztTQUNIO1FBQ0QsT0FBTyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQXVCLENBQUMsY0FBYyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICBBY3Rpb24sXHJcbiAgQWN0aW9uUmVkdWNlcixcclxuICBBY3Rpb25SZWR1Y2VyTWFwLFxyXG4gIGNvbWJpbmVSZWR1Y2VycyxcclxuICBNZXRhUmVkdWNlcixcclxufSBmcm9tICdAbmdyeC9zdG9yZSc7XHJcbmltcG9ydCB7IGxvYWRlclJlZHVjZXIgfSBmcm9tICcuLi8uLi8uLi9zdGF0ZS91dGlscy9sb2FkZXIvbG9hZGVyLnJlZHVjZXInO1xyXG5pbXBvcnQgeyBDbGllbnRUb2tlbiB9IGZyb20gJy4uLy4uL21vZGVscy90b2tlbi10eXBlcy5tb2RlbCc7XHJcbmltcG9ydCB7IEF1dGhBY3Rpb25zIH0gZnJvbSAnLi4vYWN0aW9ucy9pbmRleCc7XHJcbmltcG9ydCB7IEF1dGhTdGF0ZSwgQ0xJRU5UX1RPS0VOX0RBVEEgfSBmcm9tICcuLi9hdXRoLXN0YXRlJztcclxuaW1wb3J0ICogYXMgZnJvbVVzZXJUb2tlblJlZHVjZXIgZnJvbSAnLi91c2VyLXRva2VuLnJlZHVjZXInO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZHVjZXJzKCk6IEFjdGlvblJlZHVjZXJNYXA8QXV0aFN0YXRlPiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHVzZXJUb2tlbjogY29tYmluZVJlZHVjZXJzKHsgdG9rZW46IGZyb21Vc2VyVG9rZW5SZWR1Y2VyLnJlZHVjZXIgfSksXHJcbiAgICBjbGllbnRUb2tlbjogbG9hZGVyUmVkdWNlcjxDbGllbnRUb2tlbj4oQ0xJRU5UX1RPS0VOX0RBVEEpLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZWR1Y2VyVG9rZW46IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8XHJcbiAgQXV0aFN0YXRlXHJcbj4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8QXV0aFN0YXRlPj4oJ0F1dGhSZWR1Y2VycycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZHVjZXJQcm92aWRlcjogUHJvdmlkZXIgPSB7XHJcbiAgcHJvdmlkZTogcmVkdWNlclRva2VuLFxyXG4gIHVzZUZhY3Rvcnk6IGdldFJlZHVjZXJzLFxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQXV0aFN0YXRlKFxyXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8QXV0aFN0YXRlLCBBY3Rpb24+XHJcbik6IEFjdGlvblJlZHVjZXI8QXV0aFN0YXRlLCBBY3Rpb24+IHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gQXV0aEFjdGlvbnMuTE9HT1VUKSB7XHJcbiAgICAgIHN0YXRlID0ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIHVzZXJUb2tlbjogdW5kZWZpbmVkLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1ldGFSZWR1Y2VyczogTWV0YVJlZHVjZXI8YW55PltdID0gW2NsZWFyQXV0aFN0YXRlXTtcclxuIl19