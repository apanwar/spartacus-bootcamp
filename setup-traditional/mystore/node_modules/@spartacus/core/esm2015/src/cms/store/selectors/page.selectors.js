import { createSelector } from '@ngrx/store';
import { PageType } from '../../../model/cms.model';
import { StateUtils } from '../../../state/utils/index';
import { getCmsState } from './feature.selectors';
const getPageEntitiesSelector = (state) => state.pageData.entities;
const ɵ0 = getPageEntitiesSelector;
const getIndexByType = (index, type) => {
    switch (type) {
        case PageType.CONTENT_PAGE: {
            return index.content;
        }
        case PageType.PRODUCT_PAGE: {
            return index.product;
        }
        case PageType.CATEGORY_PAGE: {
            return index.category;
        }
        case PageType.CATALOG_PAGE: {
            return index.catalog;
        }
    }
    return { entities: {} };
};
const ɵ1 = getIndexByType;
const getPageComponentTypesSelector = (page) => {
    const componentTypes = new Set();
    if (page && page.slots) {
        for (const slot of Object.keys(page.slots)) {
            for (const component of page.slots[slot].components || []) {
                componentTypes.add(component.flexType);
            }
        }
    }
    return Array.from(componentTypes);
};
const ɵ2 = getPageComponentTypesSelector;
const ɵ3 = (state) => state.page;
export const getPageState = createSelector(getCmsState, ɵ3);
const ɵ4 = (page) => page.index;
export const getPageStateIndex = createSelector(getPageState, ɵ4);
export const getPageStateIndexEntityLoaderState = (pageContext) => createSelector(getPageStateIndex, (index) => getIndexByType(index, pageContext.type));
export const getPageStateIndexLoaderState = (pageContext) => createSelector(getPageStateIndexEntityLoaderState(pageContext), (indexState) => StateUtils.entityLoaderStateSelector(indexState, pageContext.id));
export const getPageStateIndexValue = (pageContext) => createSelector(getPageStateIndexLoaderState(pageContext), (entity) => StateUtils.loaderValueSelector(entity));
export const getPageEntities = createSelector(getPageState, getPageEntitiesSelector);
export const getPageData = (pageContext) => createSelector(getPageEntities, getPageStateIndexValue(pageContext), (entities, indexValue) => entities[indexValue]);
export const getPageComponentTypes = (pageContext) => createSelector(getPageData(pageContext), (pageData) => getPageComponentTypesSelector(pageData));
export const getCurrentSlotSelectorFactory = (pageContext, position) => {
    return createSelector(getPageData(pageContext), (entity) => {
        if (entity) {
            return entity.slots[position] || { components: [] };
        }
    });
};
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS5zZWxlY3RvcnMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvY21zL3N0b3JlL3NlbGVjdG9ycy9wYWdlLnNlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFvQixNQUFNLGFBQWEsQ0FBQztBQUMvRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFcEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBSXhELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVsRCxNQUFNLHVCQUF1QixHQUFHLENBQUMsS0FBZ0IsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7O0FBQzlFLE1BQU0sY0FBYyxHQUFHLENBQ3JCLEtBQWdCLEVBQ2hCLElBQWMsRUFDd0IsRUFBRTtJQUN4QyxRQUFRLElBQUksRUFBRTtRQUNaLEtBQUssUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFCLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQztTQUN0QjtRQUNELEtBQUssUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFCLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQztTQUN0QjtRQUNELEtBQUssUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzNCLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQztTQUN2QjtRQUNELEtBQUssUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFCLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQztTQUN0QjtLQUNGO0lBQ0QsT0FBTyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUMxQixDQUFDLENBQUM7O0FBRUYsTUFBTSw2QkFBNkIsR0FBNkIsQ0FDOUQsSUFBVSxFQUNWLEVBQUU7SUFDRixNQUFNLGNBQWMsR0FBRyxJQUFJ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b20gJ0BuZ3J4L3N0b3JlJztcclxuaW1wb3J0IHsgUGFnZVR5cGUgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9jbXMubW9kZWwnO1xyXG5pbXBvcnQgeyBQYWdlQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uL3JvdXRpbmcnO1xyXG5pbXBvcnQgeyBTdGF0ZVV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vc3RhdGUvdXRpbHMvaW5kZXgnO1xyXG5pbXBvcnQgeyBDb250ZW50U2xvdERhdGEgfSBmcm9tICcuLi8uLi9tb2RlbC9jb250ZW50LXNsb3QtZGF0YS5tb2RlbCc7XHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuLi8uLi9tb2RlbC9wYWdlLm1vZGVsJztcclxuaW1wb3J0IHsgQ21zU3RhdGUsIEluZGV4VHlwZSwgUGFnZVN0YXRlLCBTdGF0ZVdpdGhDbXMgfSBmcm9tICcuLi9jbXMtc3RhdGUnO1xyXG5pbXBvcnQgeyBnZXRDbXNTdGF0ZSB9IGZyb20gJy4vZmVhdHVyZS5zZWxlY3RvcnMnO1xyXG5cclxuY29uc3QgZ2V0UGFnZUVudGl0aWVzU2VsZWN0b3IgPSAoc3RhdGU6IFBhZ2VTdGF0ZSkgPT4gc3RhdGUucGFnZURhdGEuZW50aXRpZXM7XHJcbmNvbnN0IGdldEluZGV4QnlUeXBlID0gKFxyXG4gIGluZGV4OiBJbmRleFR5cGUsXHJcbiAgdHlwZTogUGFnZVR5cGVcclxuKTogU3RhdGVVdGlscy5FbnRpdHlMb2FkZXJTdGF0ZTxzdHJpbmc+ID0+IHtcclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgUGFnZVR5cGUuQ09OVEVOVF9QQUdFOiB7XHJcbiAgICAgIHJldHVybiBpbmRleC5jb250ZW50O1xyXG4gICAgfVxyXG4gICAgY2FzZSBQYWdlVHlwZS5QUk9EVUNUX1BBR0U6IHtcclxuICAgICAgcmV0dXJuIGluZGV4LnByb2R1Y3Q7XHJcbiAgICB9XHJcbiAgICBjYXNlIFBhZ2VUeXBlLkNBVEVHT1JZX1BBR0U6IHtcclxuICAgICAgcmV0dXJuIGluZGV4LmNhdGVnb3J5O1xyXG4gICAgfVxyXG4gICAgY2FzZSBQYWdlVHlwZS5DQVRBTE9HX1BBR0U6IHtcclxuICAgICAgcmV0dXJuIGluZGV4LmNhdGFsb2c7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB7IGVudGl0aWVzOiB7fSB9O1xyXG59O1xyXG5cclxuY29uc3QgZ2V0UGFnZUNvbXBvbmVudFR5cGVzU2VsZWN0b3I6IChwYWdlOiBQYWdlKSA9PiBzdHJpbmdbXSA9IChcclxuICBwYWdlOiBQYWdlXHJcbikgPT4ge1xyXG4gIGNvbnN0IGNvbXBvbmVudFR5cGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgaWYgKHBhZ2UgJiYgcGFnZS5zbG90cykge1xyXG4gICAgZm9yIChjb25zdCBzbG90IG9mIE9iamVjdC5rZXlzKHBhZ2Uuc2xvdHMpKSB7XHJcbiAgICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHBhZ2Uuc2xvdHNbc2xvdF0uY29tcG9uZW50cyB8fCBbXSkge1xyXG4gICAgICAgIGNvbXBvbmVudFR5cGVzLmFkZChjb21wb25lbnQuZmxleFR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBBcnJheS5mcm9tKGNvbXBvbmVudFR5cGVzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYWdlU3RhdGU6IE1lbW9pemVkU2VsZWN0b3I8XHJcbiAgU3RhdGVXaXRoQ21zLFxyXG4gIFBhZ2VTdGF0ZVxyXG4+ID0gY3JlYXRlU2VsZWN0b3IoZ2V0Q21zU3RhdGUsIChzdGF0ZTogQ21zU3RhdGUpID0+IHN0YXRlLnBhZ2UpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFBhZ2VTdGF0ZUluZGV4OiBNZW1vaXplZFNlbGVjdG9yPFxyXG4gIFN0YXRlV2l0aENtcyxcclxuICBJbmRleFR5cGVcclxuPiA9IGNyZWF0ZVNlbGVjdG9yKGdldFBhZ2VTdGF0ZSwgKHBhZ2U6IFBhZ2VTdGF0ZSkgPT4gcGFnZS5pbmRleCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UGFnZVN0YXRlSW5kZXhFbnRpdHlMb2FkZXJTdGF0ZSA9IChcclxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRcclxuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhDbXMsIFN0YXRlVXRpbHMuRW50aXR5TG9hZGVyU3RhdGU8c3RyaW5nPj4gPT5cclxuICBjcmVhdGVTZWxlY3RvcihnZXRQYWdlU3RhdGVJbmRleCwgKGluZGV4OiBJbmRleFR5cGUpID0+XHJcbiAgICBnZXRJbmRleEJ5VHlwZShpbmRleCwgcGFnZUNvbnRleHQudHlwZSlcclxuICApO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFBhZ2VTdGF0ZUluZGV4TG9hZGVyU3RhdGUgPSAoXHJcbiAgcGFnZUNvbnRleHQ6IFBhZ2VDb250ZXh0XHJcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoQ21zLCBTdGF0ZVV0aWxzLkxvYWRlclN0YXRlPHN0cmluZz4+ID0+XHJcbiAgY3JlYXRlU2VsZWN0b3IoXHJcbiAgICBnZXRQYWdlU3RhdGVJbmRleEVudGl0eUxvYWRlclN0YXRlKHBhZ2VDb250ZXh0KSxcclxuICAgIChpbmRleFN0YXRlKSA9PlxyXG4gICAgICBTdGF0ZVV0aWxzLmVudGl0eUxvYWRlclN0YXRlU2VsZWN0b3IoaW5kZXhTdGF0ZSwgcGFnZUNvbnRleHQuaWQpXHJcbiAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYWdlU3RhdGVJbmRleFZhbHVlID0gKFxyXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFxyXG4pOiBNZW1vaXplZFNlbGVjdG9yPFN0YXRlV2l0aENtcywgc3RyaW5nPiA9PlxyXG4gIGNyZWF0ZVNlbGVjdG9yKGdldFBhZ2VTdGF0ZUluZGV4TG9hZGVyU3RhdGUocGFnZUNvbnRleHQpLCAoZW50aXR5KSA9PlxyXG4gICAgU3RhdGVVdGlscy5sb2FkZXJWYWx1ZVNlbGVjdG9yPHN0cmluZz4oZW50aXR5KVxyXG4gICk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UGFnZUVudGl0aWVzOiBNZW1vaXplZFNlbGVjdG9yPFxyXG4gIFN0YXRlV2l0aENtcyxcclxuICB7IFtpZDogc3RyaW5nXTogUGFnZSB9XHJcbj4gPSBjcmVhdGVTZWxlY3RvcihnZXRQYWdlU3RhdGUsIGdldFBhZ2VFbnRpdGllc1NlbGVjdG9yKTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYWdlRGF0YSA9IChcclxuICBwYWdlQ29udGV4dDogUGFnZUNvbnRleHRcclxuKTogTWVtb2l6ZWRTZWxlY3RvcjxTdGF0ZVdpdGhDbXMsIFBhZ2U+ID0+XHJcbiAgY3JlYXRlU2VsZWN0b3IoXHJcbiAgICBnZXRQYWdlRW50aXRpZXMsXHJcbiAgICBnZXRQYWdlU3RhdGVJbmRleFZhbHVlKHBhZ2VDb250ZXh0KSxcclxuICAgIChlbnRpdGllczogeyBbaWQ6IHN0cmluZ106IFBhZ2UgfSwgaW5kZXhWYWx1ZTogc3RyaW5nKSA9PlxyXG4gICAgICBlbnRpdGllc1tpbmRleFZhbHVlXVxyXG4gICk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UGFnZUNvbXBvbmVudFR5cGVzID0gKFxyXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dFxyXG4pOiBNZW1vaXplZFNlbGVjdG9yPFN0YXRlV2l0aENtcywgc3RyaW5nW10+ID0+XHJcbiAgY3JlYXRlU2VsZWN0b3IoZ2V0UGFnZURhdGEocGFnZUNvbnRleHQpLCAocGFnZURhdGEpID0+XHJcbiAgICBnZXRQYWdlQ29tcG9uZW50VHlwZXNTZWxlY3RvcihwYWdlRGF0YSlcclxuICApO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRTbG90U2VsZWN0b3JGYWN0b3J5ID0gKFxyXG4gIHBhZ2VDb250ZXh0OiBQYWdlQ29udGV4dCxcclxuICBwb3NpdGlvbjogc3RyaW5nXHJcbik6IE1lbW9pemVkU2VsZWN0b3I8U3RhdGVXaXRoQ21zLCBDb250ZW50U2xvdERhdGE+ID0+IHtcclxuICByZXR1cm4gY3JlYXRlU2VsZWN0b3IoZ2V0UGFnZURhdGEocGFnZUNvbnRleHQpLCAoZW50aXR5KSA9PiB7XHJcbiAgICBpZiAoZW50aXR5KSB7XHJcbiAgICAgIHJldHVybiBlbnRpdHkuc2xvdHNbcG9zaXRpb25dIHx8IHsgY29tcG9uZW50czogW10gfTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuIl19