import { __assign } from "tslib";
import { ANONYMOUS_CONSENT_STATUS, } from '../../../model/consent.model';
import { AnonymousConsentsActions } from '../actions/index';
export var initialState = [];
export function toggleConsentStatus(consents, templateCode, status) {
    if (!consents) {
        return [];
    }
    return consents.map(function (consent) {
        if (consent.templateCode === templateCode) {
            consent = __assign(__assign({}, consent), { consentState: status });
        }
        return consent;
    });
}
export function reducer(state, action) {
    if (state === void 0) { state = initialState; }
    switch (action.type) {
        case AnonymousConsentsActions.GIVE_ANONYMOUS_CONSENT: {
            return toggleConsentStatus(state, action.templateCode, ANONYMOUS_CONSENT_STATUS.GIVEN);
        }
        case AnonymousConsentsActions.WITHDRAW_ANONYMOUS_CONSENT: {
            return toggleConsentStatus(state, action.templateCode, ANONYMOUS_CONSENT_STATUS.WITHDRAWN);
        }
        case AnonymousConsentsActions.SET_ANONYMOUS_CONSENTS: {
            return action.payload;
        }
    }
    return state;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5vbnltb3VzLWNvbnNlbnRzLnJlZHVjZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvYW5vbnltb3VzLWNvbnNlbnRzL3N0b3JlL3JlZHVjZXJzL2Fub255bW91cy1jb25zZW50cy5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBRUwsd0JBQXdCLEdBQ3pCLE1BQU0sOEJBQThCLENBQUM7QUFDdEMsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFNUQsTUFBTSxDQUFDLElBQU0sWUFBWSxHQUF1QixFQUFFLENBQUM7QUFFbkQsTUFBTSxVQUFVLG1CQUFtQixDQUNqQyxRQUE0QixFQUM1QixZQUFvQixFQUNwQixNQUFnQztJQUVoQyxJQUFJLENBQUMsUUFBUSxFQUFFO1FBQ2IsT0FBTyxFQUFFLENBQUM7S0FDWDtJQUVELE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFDLE9BQU87UUFDMUIsSUFBSSxPQUFPLENBQUMsWUFBWSxLQUFLLFlBQVksRUFBRTtZQUN6QyxPQUFPLHlCQUNGLE9BQU8sS0FDVixZQUFZLEVBQUUsTUFBTSxHQUNyQixDQUFDO1NBQ0g7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUNyQixLQUFvQixFQUNwQixNQUF5RDtJQUR6RCxzQkFBQSxFQUFBLG9CQUFvQjtJQUdwQixRQUFRLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDbkIsS0FBSyx3QkFBd0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3BELE9BQU8sbUJBQW1CLENBQ3hCLEtBQUssRUFDTCxNQUFNLENBQUMsWUFBWSxFQUNuQix3QkFBd0IsQ0FBQyxLQUFLLENBQy9CLENBQUM7U0FDSDtRQUVELEtBQUssd0JBQXdCLENBQUMsMEJBQTBCLENBQUMsQ0FBQztZQUN4RCxPQUFPLG1CQUFtQixDQUN4QixLQUFLLEVBQ0wsTUFBTSxDQUFDLFlBQVksRUFDbkIsd0JBQXdCLENBQUMsU0FBUyxDQUNuQyxDQUFDO1NBQ0g7UUFFRCxLQUFLLHdCQUF3QixDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFDcEQsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDO1NBQ3ZCO0tBQ0Y7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFub255bW91c0NvbnNlbnQsXHJcbiAgQU5PTllNT1VTX0NPTlNFTlRfU1RBVFVTLFxyXG59IGZyb20gJy4uLy4uLy4uL21vZGVsL2NvbnNlbnQubW9kZWwnO1xyXG5pbXBvcnQgeyBBbm9ueW1vdXNDb25zZW50c0FjdGlvbnMgfSBmcm9tICcuLi9hY3Rpb25zL2luZGV4JztcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsU3RhdGU6IEFub255bW91c0NvbnNlbnRbXSA9IFtdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUNvbnNlbnRTdGF0dXMoXHJcbiAgY29uc2VudHM6IEFub255bW91c0NvbnNlbnRbXSxcclxuICB0ZW1wbGF0ZUNvZGU6IHN0cmluZyxcclxuICBzdGF0dXM6IEFOT05ZTU9VU19DT05TRU5UX1NUQVRVU1xyXG4pOiBBbm9ueW1vdXNDb25zZW50W10ge1xyXG4gIGlmICghY29uc2VudHMpIHtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjb25zZW50cy5tYXAoKGNvbnNlbnQpID0+IHtcclxuICAgIGlmIChjb25zZW50LnRlbXBsYXRlQ29kZSA9PT0gdGVtcGxhdGVDb2RlKSB7XHJcbiAgICAgIGNvbnNlbnQgPSB7XHJcbiAgICAgICAgLi4uY29uc2VudCxcclxuICAgICAgICBjb25zZW50U3RhdGU6IHN0YXR1cyxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb25zZW50O1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlcihcclxuICBzdGF0ZSA9IGluaXRpYWxTdGF0ZSxcclxuICBhY3Rpb246IEFub255bW91c0NvbnNlbnRzQWN0aW9ucy5Bbm9ueW1vdXNDb25zZW50c0FjdGlvbnNcclxuKTogQW5vbnltb3VzQ29uc2VudFtdIHtcclxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XHJcbiAgICBjYXNlIEFub255bW91c0NvbnNlbnRzQWN0aW9ucy5HSVZFX0FOT05ZTU9VU19DT05TRU5UOiB7XHJcbiAgICAgIHJldHVybiB0b2dnbGVDb25zZW50U3RhdHVzKFxyXG4gICAgICAgIHN0YXRlLFxyXG4gICAgICAgIGFjdGlvbi50ZW1wbGF0ZUNvZGUsXHJcbiAgICAgICAgQU5PTllNT1VTX0NPTlNFTlRfU1RBVFVTLkdJVkVOXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBBbm9ueW1vdXNDb25zZW50c0FjdGlvbnMuV0lUSERSQVdfQU5PTllNT1VTX0NPTlNFTlQ6IHtcclxuICAgICAgcmV0dXJuIHRvZ2dsZUNvbnNlbnRTdGF0dXMoXHJcbiAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgYWN0aW9uLnRlbXBsYXRlQ29kZSxcclxuICAgICAgICBBTk9OWU1PVVNfQ09OU0VOVF9TVEFUVVMuV0lUSERSQVdOXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBBbm9ueW1vdXNDb25zZW50c0FjdGlvbnMuU0VUX0FOT05ZTU9VU19DT05TRU5UUzoge1xyXG4gICAgICByZXR1cm4gYWN0aW9uLnBheWxvYWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3RhdGU7XHJcbn1cclxuIl19