import { InjectionToken } from '@angular/core';
import { SiteContextActions } from '../../../site-context/store/actions/index';
import { PRODUCT_DETAIL_ENTITY } from '../product-state';
import * as fromProductReferences from './product-references.reducer';
import * as fromProductReviews from './product-reviews.reducer';
import * as fromProductsSearch from './product-search.reducer';
import { entityScopedLoaderReducer } from '../../../state/utils/scoped-loader/entity-scoped-loader.reducer';
export function getReducers() {
    return {
        search: fromProductsSearch.reducer,
        details: entityScopedLoaderReducer(PRODUCT_DETAIL_ENTITY),
        reviews: fromProductReviews.reducer,
        references: fromProductReferences.reducer,
    };
}
export var reducerToken = new InjectionToken('ProductReducers');
export var reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearProductsState(reducer) {
    return function (state, action) {
        if (action.type === SiteContextActions.CURRENCY_CHANGE ||
            action.type === SiteContextActions.LANGUAGE_CHANGE) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export var metaReducers = [clearProductsState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMvcHJvZHVjdC9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBR3pELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxxQkFBcUIsRUFBaUIsTUFBTSxrQkFBa0IsQ0FBQztBQUN4RSxPQUFPLEtBQUsscUJBQXFCLE1BQU0sOEJBQThCLENBQUM7QUFDdEUsT0FBTyxLQUFLLGtCQUFrQixNQUFNLDJCQUEyQixDQUFDO0FBQ2hFLE9BQU8sS0FBSyxrQkFBa0IsTUFBTSwwQkFBMEIsQ0FBQztBQUMvRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpRUFBaUUsQ0FBQztBQUU1RyxNQUFNLFVBQVUsV0FBVztJQUN6QixPQUFPO1FBQ0wsTUFBTSxFQUFFLGtCQUFrQixDQUFDLE9BQU87UUFDbEMsT0FBTyxFQUFFLHlCQUF5QixDQUFVLHFCQUFxQixDQUFDO1FBQ2xFLE9BQU8sRUFBRSxrQkFBa0IsQ0FBQyxPQUFPO1FBQ25DLFVBQVUsRUFBRSxxQkFBcUIsQ0FBQyxPQUFPO0tBQzFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLElBQU0sWUFBWSxHQUVwQixJQUFJLGNBQWMsQ0FBa0MsaUJBQWlCLENBQUMsQ0FBQztBQUU1RSxNQUFNLENBQUMsSUFBTSxlQUFlLEdBQWE7SUFDdkMsT0FBTyxFQUFFLFlBQVk7SUFDckIsVUFBVSxFQUFFLFdBQVc7Q0FDeEIsQ0FBQztBQUVGLE1BQU0sVUFBVSxrQkFBa0IsQ0FDaEMsT0FBMkI7SUFFM0IsT0FBTyxVQUFVLEtBQUssRUFBRSxNQUFNO1FBQzVCLElBQ0UsTUFBTSxDQUFDLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxlQUFlO1lBQ2xELE1BQU0sQ0FBQyxJQUFJLEtBQUssa0JBQWtCLENBQUMsZUFBZSxFQUNsRDtZQUNBLEtBQUssR0FBRyxTQUFTLENBQUM7U0FDbkI7UUFDRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxJQUFNLFlBQVksR0FBdUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFjdGlvblJlZHVjZXIsIEFjdGlvblJlZHVjZXJNYXAsIE1ldGFSZWR1Y2VyIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSAnLi4vLi4vLi4vbW9kZWwvcHJvZHVjdC5tb2RlbCc7XHJcbmltcG9ydCB7IFNpdGVDb250ZXh0QWN0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3NpdGUtY29udGV4dC9zdG9yZS9hY3Rpb25zL2luZGV4JztcclxuaW1wb3J0IHsgUFJPRFVDVF9ERVRBSUxfRU5USVRZLCBQcm9kdWN0c1N0YXRlIH0gZnJvbSAnLi4vcHJvZHVjdC1zdGF0ZSc7XHJcbmltcG9ydCAqIGFzIGZyb21Qcm9kdWN0UmVmZXJlbmNlcyBmcm9tICcuL3Byb2R1Y3QtcmVmZXJlbmNlcy5yZWR1Y2VyJztcclxuaW1wb3J0ICogYXMgZnJvbVByb2R1Y3RSZXZpZXdzIGZyb20gJy4vcHJvZHVjdC1yZXZpZXdzLnJlZHVjZXInO1xyXG5pbXBvcnQgKiBhcyBmcm9tUHJvZHVjdHNTZWFyY2ggZnJvbSAnLi9wcm9kdWN0LXNlYXJjaC5yZWR1Y2VyJztcclxuaW1wb3J0IHsgZW50aXR5U2NvcGVkTG9hZGVyUmVkdWNlciB9IGZyb20gJy4uLy4uLy4uL3N0YXRlL3V0aWxzL3Njb3BlZC1sb2FkZXIvZW50aXR5LXNjb3BlZC1sb2FkZXIucmVkdWNlcic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVkdWNlcnMoKTogQWN0aW9uUmVkdWNlck1hcDxQcm9kdWN0c1N0YXRlPiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNlYXJjaDogZnJvbVByb2R1Y3RzU2VhcmNoLnJlZHVjZXIsXHJcbiAgICBkZXRhaWxzOiBlbnRpdHlTY29wZWRMb2FkZXJSZWR1Y2VyPFByb2R1Y3Q+KFBST0RVQ1RfREVUQUlMX0VOVElUWSksXHJcbiAgICByZXZpZXdzOiBmcm9tUHJvZHVjdFJldmlld3MucmVkdWNlcixcclxuICAgIHJlZmVyZW5jZXM6IGZyb21Qcm9kdWN0UmVmZXJlbmNlcy5yZWR1Y2VyLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZWR1Y2VyVG9rZW46IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8XHJcbiAgUHJvZHVjdHNTdGF0ZVxyXG4+PiA9IG5ldyBJbmplY3Rpb25Ub2tlbjxBY3Rpb25SZWR1Y2VyTWFwPFByb2R1Y3RzU3RhdGU+PignUHJvZHVjdFJlZHVjZXJzJyk7XHJcblxyXG5leHBvcnQgY29uc3QgcmVkdWNlclByb3ZpZGVyOiBQcm92aWRlciA9IHtcclxuICBwcm92aWRlOiByZWR1Y2VyVG9rZW4sXHJcbiAgdXNlRmFjdG9yeTogZ2V0UmVkdWNlcnMsXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJQcm9kdWN0c1N0YXRlKFxyXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8YW55PlxyXG4pOiBBY3Rpb25SZWR1Y2VyPGFueT4ge1xyXG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xyXG4gICAgaWYgKFxyXG4gICAgICBhY3Rpb24udHlwZSA9PT0gU2l0ZUNvbnRleHRBY3Rpb25zLkNVUlJFTkNZX0NIQU5HRSB8fFxyXG4gICAgICBhY3Rpb24udHlwZSA9PT0gU2l0ZUNvbnRleHRBY3Rpb25zLkxBTkdVQUdFX0NIQU5HRVxyXG4gICAgKSB7XHJcbiAgICAgIHN0YXRlID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1ldGFSZWR1Y2VyczogTWV0YVJlZHVjZXI8YW55PltdID0gW2NsZWFyUHJvZHVjdHNTdGF0ZV07XHJcbiJdfQ==