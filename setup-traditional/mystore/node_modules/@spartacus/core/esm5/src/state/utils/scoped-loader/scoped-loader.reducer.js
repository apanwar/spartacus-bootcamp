import { __assign } from "tslib";
import { loaderReducer } from '../loader/loader.reducer';
export var initialScopedLoaderState = {};
/**
 * Higher order reducer designed to add scope support for loader reducer
 *
 * @param entityType
 * @param reducer
 */
export function scopedLoaderReducer(entityType, reducer) {
    var loader = loaderReducer(entityType, reducer);
    return function (state, action) {
        var _a;
        if (state === void 0) { state = initialScopedLoaderState; }
        var _b;
        if (action && action.meta && action.meta.entityType === entityType) {
            return __assign(__assign({}, state), (_a = {}, _a[(_b = action.meta.scope) !== null && _b !== void 0 ? _b : ''] = loader(state[action.meta.scope], action), _a));
        }
        return state;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVkLWxvYWRlci5yZWR1Y2VyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHNwYXJ0YWN1cy9jb3JlLyIsInNvdXJjZXMiOlsic3JjL3N0YXRlL3V0aWxzL3Njb3BlZC1sb2FkZXIvc2NvcGVkLWxvYWRlci5yZWR1Y2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFLekQsTUFBTSxDQUFDLElBQU0sd0JBQXdCLEdBQTJCLEVBQUUsQ0FBQztBQUVuRTs7Ozs7R0FLRztBQUNILE1BQU0sVUFBVSxtQkFBbUIsQ0FDakMsVUFBa0IsRUFDbEIsT0FBeUM7SUFLekMsSUFBTSxNQUFNLEdBQUcsYUFBYSxDQUFJLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUVyRCxPQUFPLFVBQ0wsS0FBc0QsRUFDdEQsTUFBZ0M7O1FBRGhDLHNCQUFBLEVBQUEsZ0NBQXNEOztRQUd0RCxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxLQUFLLFVBQVUsRUFBRTtZQUNsRSw2QkFDSyxLQUFLLHNCQUNQLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxtQ0FBSSxFQUFFLElBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FBQyxPQUNuRTtTQUNIO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZGVyUmVkdWNlciB9IGZyb20gJy4uL2xvYWRlci9sb2FkZXIucmVkdWNlcic7XHJcbmltcG9ydCB7IEVudGl0eVNjb3BlZExvYWRlckFjdGlvbiB9IGZyb20gJy4uLy4uLy4uL3Byb2R1Y3Qvc3RvcmUvYWN0aW9ucy9wcm9kdWN0LmFjdGlvbic7XHJcbmltcG9ydCB7IFNjb3BlZExvYWRlclN0YXRlIH0gZnJvbSAnLi9zY29wZWQtbG9hZGVyLnN0YXRlJztcclxuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxTY29wZWRMb2FkZXJTdGF0ZTogU2NvcGVkTG9hZGVyU3RhdGU8YW55PiA9IHt9O1xyXG5cclxuLyoqXHJcbiAqIEhpZ2hlciBvcmRlciByZWR1Y2VyIGRlc2lnbmVkIHRvIGFkZCBzY29wZSBzdXBwb3J0IGZvciBsb2FkZXIgcmVkdWNlclxyXG4gKlxyXG4gKiBAcGFyYW0gZW50aXR5VHlwZVxyXG4gKiBAcGFyYW0gcmVkdWNlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlZExvYWRlclJlZHVjZXI8VD4oXHJcbiAgZW50aXR5VHlwZTogc3RyaW5nLFxyXG4gIHJlZHVjZXI/OiAoc3RhdGU6IFQsIGFjdGlvbjogQWN0aW9uKSA9PiBUXHJcbik6IChcclxuICBzdGF0ZTogU2NvcGVkTG9hZGVyU3RhdGU8VD4sXHJcbiAgYWN0aW9uOiBFbnRpdHlTY29wZWRMb2FkZXJBY3Rpb25cclxuKSA9PiBTY29wZWRMb2FkZXJTdGF0ZTxUPiB7XHJcbiAgY29uc3QgbG9hZGVyID0gbG9hZGVyUmVkdWNlcjxUPihlbnRpdHlUeXBlLCByZWR1Y2VyKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIHN0YXRlOiBTY29wZWRMb2FkZXJTdGF0ZTxUPiA9IGluaXRpYWxTY29wZWRMb2FkZXJTdGF0ZSxcclxuICAgIGFjdGlvbjogRW50aXR5U2NvcGVkTG9hZGVyQWN0aW9uXHJcbiAgKTogU2NvcGVkTG9hZGVyU3RhdGU8VD4gPT4ge1xyXG4gICAgaWYgKGFjdGlvbiAmJiBhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5lbnRpdHlUeXBlID09PSBlbnRpdHlUeXBlKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uc3RhdGUsXHJcbiAgICAgICAgW2FjdGlvbi5tZXRhLnNjb3BlID8/ICcnXTogbG9hZGVyKHN0YXRlW2FjdGlvbi5tZXRhLnNjb3BlXSwgYWN0aW9uKSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGF0ZTtcclxuICB9O1xyXG59XHJcbiJdfQ==