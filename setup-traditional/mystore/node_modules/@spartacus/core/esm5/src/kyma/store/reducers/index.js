import { __assign } from "tslib";
import { InjectionToken } from '@angular/core';
import { AuthActions } from '../../../auth/store/actions/index';
import { loaderReducer } from '../../../state/utils/loader/loader.reducer';
import { OPEN_ID_TOKEN_DATA } from '../kyma-state';
export function getReducers() {
    return {
        openIdToken: loaderReducer(OPEN_ID_TOKEN_DATA),
    };
}
export var reducerToken = new InjectionToken('KymaReducers');
export var reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearKymaState(reducer) {
    return function (state, action) {
        if (action.type === AuthActions.LOGOUT) {
            state = __assign(__assign({}, state), { openIdToken: undefined });
        }
        return reducer(state, action);
    };
}
export var metaReducers = [clearKymaState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL2NvcmUvIiwic291cmNlcyI6WyJzcmMva3ltYS9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLGNBQWMsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQU96RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDaEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBRTNFLE9BQU8sRUFBYSxrQkFBa0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU5RCxNQUFNLFVBQVUsV0FBVztJQUN6QixPQUFPO1FBQ0wsV0FBVyxFQUFFLGFBQWEsQ0FBYyxrQkFBa0IsQ0FBQztLQUM1RCxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxJQUFNLFlBQVksR0FFcEIsSUFBSSxjQUFjLENBQThCLGNBQWMsQ0FBQyxDQUFDO0FBRXJFLE1BQU0sQ0FBQyxJQUFNLGVBQWUsR0FBYTtJQUN2QyxPQUFPLEVBQUUsWUFBWTtJQUNyQixVQUFVLEVBQUUsV0FBVztDQUN4QixDQUFDO0FBRUYsTUFBTSxVQUFVLGNBQWMsQ0FDNUIsT0FBeUM7SUFFekMsT0FBTyxVQUFVLEtBQUssRUFBRSxNQUFNO1FBQzVCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxXQUFXLENBQUMsTUFBTSxFQUFFO1lBQ3RDLEtBQUsseUJBQ0EsS0FBSyxLQUNSLFdBQVcsRUFBRSxTQUFTLEdBQ3ZCLENBQUM7U0FDSDtRQUNELE9BQU8sT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLElBQU0sWUFBWSxHQUF1QixDQUFDLGNBQWMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQWN0aW9uLFxyXG4gIEFjdGlvblJlZHVjZXIsXHJcbiAgQWN0aW9uUmVkdWNlck1hcCxcclxuICBNZXRhUmVkdWNlcixcclxufSBmcm9tICdAbmdyeC9zdG9yZSc7XHJcbmltcG9ydCB7IEF1dGhBY3Rpb25zIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9zdG9yZS9hY3Rpb25zL2luZGV4JztcclxuaW1wb3J0IHsgbG9hZGVyUmVkdWNlciB9IGZyb20gJy4uLy4uLy4uL3N0YXRlL3V0aWxzL2xvYWRlci9sb2FkZXIucmVkdWNlcic7XHJcbmltcG9ydCB7IE9wZW5JZFRva2VuIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2t5bWEtdG9rZW4tdHlwZXMubW9kZWwnO1xyXG5pbXBvcnQgeyBLeW1hU3RhdGUsIE9QRU5fSURfVE9LRU5fREFUQSB9IGZyb20gJy4uL2t5bWEtc3RhdGUnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZHVjZXJzKCk6IEFjdGlvblJlZHVjZXJNYXA8S3ltYVN0YXRlPiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG9wZW5JZFRva2VuOiBsb2FkZXJSZWR1Y2VyPE9wZW5JZFRva2VuPihPUEVOX0lEX1RPS0VOX0RBVEEpLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZWR1Y2VyVG9rZW46IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8XHJcbiAgS3ltYVN0YXRlXHJcbj4+ID0gbmV3IEluamVjdGlvblRva2VuPEFjdGlvblJlZHVjZXJNYXA8S3ltYVN0YXRlPj4oJ0t5bWFSZWR1Y2VycycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZHVjZXJQcm92aWRlcjogUHJvdmlkZXIgPSB7XHJcbiAgcHJvdmlkZTogcmVkdWNlclRva2VuLFxyXG4gIHVzZUZhY3Rvcnk6IGdldFJlZHVjZXJzLFxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyS3ltYVN0YXRlKFxyXG4gIHJlZHVjZXI6IEFjdGlvblJlZHVjZXI8S3ltYVN0YXRlLCBBY3Rpb24+XHJcbik6IEFjdGlvblJlZHVjZXI8S3ltYVN0YXRlLCBBY3Rpb24+IHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gQXV0aEFjdGlvbnMuTE9HT1VUKSB7XHJcbiAgICAgIHN0YXRlID0ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIG9wZW5JZFRva2VuOiB1bmRlZmluZWQsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWV0YVJlZHVjZXJzOiBNZXRhUmVkdWNlcjxhbnk+W10gPSBbY2xlYXJLeW1hU3RhdGVdO1xyXG4iXX0=